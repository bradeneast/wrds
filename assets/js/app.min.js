var __extends=this&&this.__extends||function(){var q=function(t,o){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var m in u)u.hasOwnProperty(m)&&(s[m]=u[m])},q(t,o)};return function(t,o){q(t,o);function s(){this.constructor=t}t.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s())}}(),__makeTemplateObject=this&&this.__makeTemplateObject||function(q,t){return Object.defineProperty?Object.defineProperty(q,"raw",{value:t}):q.raw=t,q},__awaiter=this&&this.__awaiter||function(q,t,o,s){function u(m){return m instanceof o?m:new o(function(x){x(m)})}return new(o||(o=Promise))(function(m,x){function H(A){try{p(s.next(A))}catch(L){x(L)}}function B(A){try{p(s.throw(A))}catch(L){x(L)}}function p(A){A.done?m(A.value):u(A.value).then(H,B)}p((s=s.apply(q,t||[])).next())})},__generator=this&&this.__generator||function(q,t){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},s,u,m,x;return x={next:H(0),throw:H(1),return:H(2)},typeof Symbol==="function"&&(x[Symbol.iterator]=function(){return this}),x;function H(p){return function(A){return B([p,A])}}function B(p){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,u&&(m=p[0]&2?u.return:p[0]?u.throw||((m=u.return)&&m.call(u),0):u.next)&&!(m=m.call(u,p[1])).done)return m;(u=0,m)&&(p=[p[0]&2,m.value]);switch(p[0]){case 0:case 1:m=p;break;case 4:return o.label++,{value:p[1],done:!1};case 5:o.label++,u=p[1],p=[0];continue;case 7:p=o.ops.pop(),o.trys.pop();continue;default:if(!(m=o.trys,m=m.length>0&&m[m.length-1])&&(p[0]===6||p[0]===2)){o=0;continue}if(p[0]===3&&(!m||p[1]>m[0]&&p[1]<m[3])){o.label=p[1];break}if(p[0]===6&&o.label<m[1]){o.label=m[1],m=p;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(p);break}m[2]&&o.ops.pop(),o.trys.pop();continue}p=t.call(q,o)}catch(A){p=[6,A],u=0}finally{s=m=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},__values=this&&this.__values||function(q){var t=typeof Symbol==="function"&&Symbol.iterator,o=t&&q[t],s=0;if(o)return o.call(q);if(q&&typeof q.length==="number")return{next:function(){return q&&s>=q.length&&(q=void 0),{value:q&&q[s++],done:!q}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(q,t){var o=typeof Symbol==="function"&&q[Symbol.iterator];if(!o)return q;var s=o.call(q),u,m=[],x;try{for(;(t===void 0||t-- >0)&&!(u=s.next()).done;)m.push(u.value)}catch(H){x={error:H}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(x)throw x.error}}return m},__spread=this&&this.__spread||function(){for(var q=[],t=0;t<arguments.length;t++)q=q.concat(__read(arguments[t]));return q};(function(){var q,t,o=new WeakMap(),s=function(b){return typeof b==="function"&&o.has(b)},u=typeof window!=="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,m=function(b,a,c){for(c===void 0&&(c=null);a!==c;){var d=a.nextSibling;b.removeChild(a),a=d}},x={},H={},B="{{lit-"+String(Math.random()).slice(2)+"}}",p="<!--"+B+"-->",A=new RegExp(B+"|"+p),L="$lit$",Qa=function(){function b(a,c){var d,f;this.parts=[],this.element=c;for(var g=[],h=[],i=document.createTreeWalker(c.content,133,null,!1),j=0,k=-1,n=0,w=a.strings,y=a.values.length;n<y;){var r=i.nextNode();if(r===null){i.currentNode=h.pop();continue}k++;if(r.nodeType===1){if(r.hasAttributes()){for(var C=r.attributes,$=C.length,K=0,D=0;D<$;D++)ta(C[D].name,L)&&K++;for(;K-- >0;){var D=w[n],R=ma.exec(D)[2],S=R.toLowerCase()+L,N=r.getAttribute(S);r.removeAttribute(S);var G=N.split(A);this.parts.push({type:"attribute",index:k,name:R,strings:G}),n+=G.length-1}}r.tagName==="TEMPLATE"&&(h.push(r),i.currentNode=r.content)}else if(r.nodeType===3){var C=r.data;if(C.indexOf(B)>=0){for(var $=r.parentNode,K=C.split(A),D=K.length-1,R=0;R<D;R++){var S=void 0,N=K[R];if(N==="")S=O();else{var G=ma.exec(N);G!==null&&ta(G[2],L)&&(N=N.slice(0,G.index)+G[1]+G[2].slice(0,-L.length)+G[3]),S=document.createTextNode(N)}$.insertBefore(S,r),this.parts.push({type:"node",index:++k})}K[D]===""?($.insertBefore(O(),r),g.push(r)):r.data=K[D],n+=D}}else if(r.nodeType===8)if(r.data===B){var C=r.parentNode;(r.previousSibling===null||k===j)&&(k++,C.insertBefore(O(),r)),j=k,this.parts.push({type:"node",index:k}),r.nextSibling===null?r.data="":(g.push(r),k--),n++}else for(var C=-1;(C=r.data.indexOf(B,C+1))!==-1;)this.parts.push({type:"node",index:-1}),n++}try{for(var aa=__values(g),l=aa.next();!l.done;l=aa.next()){var r=l.value;r.parentNode.removeChild(r)}}catch(v){d={error:v}}finally{try{l&&!l.done&&(f=aa.return)&&f.call(aa)}finally{if(d)throw d.error}}}return b}(),ta=function(b,a){var c=b.length-a.length;return c>=0&&b.slice(c)===a},Ra=function(b){return b.index!==-1},O=function(){return document.createComment("")},ma=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,ua=function(){function b(a,c,d){this.__parts=[],this.template=a,this.processor=c,this.options=d}return b.prototype.update=function(a){var c,d,f,g,h=0;try{for(var i=__values(this.__parts),j=i.next();!j.done;j=i.next()){var k=j.value;k!==void 0&&k.setValue(a[h]),h++}}catch(y){c={error:y}}finally{try{j&&!j.done&&(d=i.return)&&d.call(i)}finally{if(c)throw c.error}}try{for(var n=__values(this.__parts),w=n.next();!w.done;w=n.next()){var k=w.value;k!==void 0&&k.commit()}}catch(y){f={error:y}}finally{try{w&&!w.done&&(g=n.return)&&g.call(n)}finally{if(f)throw f.error}}},b.prototype._clone=function(){for(var a,c=u?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),d=[],f=this.template.parts,g=document.createTreeWalker(c,133,null,!1),h=0,i=0,j,k=g.nextNode();h<f.length;){j=f[h];if(!Ra(j)){this.__parts.push(void 0),h++;continue}for(;i<j.index;)i++,k.nodeName==="TEMPLATE"&&(d.push(k),g.currentNode=k.content),(k=g.nextNode())===null&&(g.currentNode=d.pop(),k=g.nextNode());if(j.type==="node"){var n=this.processor.handleTextExpression(this.options);n.insertAfterNode(k.previousSibling),this.__parts.push(n)}else(a=this.__parts).push.apply(a,__spread(this.processor.handleAttributeExpressions(k,j.name,j.strings,this.options)));h++}return u&&(document.adoptNode(c),customElements.upgrade(c)),c},b}(),Sa=" "+B+" ",va=function(){function b(a,c,d,f){this.strings=a,this.values=c,this.type=d,this.processor=f}return b.prototype.getHTML=function(){for(var a=this.strings.length-1,c="",d=!1,f=0;f<a;f++){var g=this.strings[f],h=g.lastIndexOf("<!--");d=(h>-1||d)&&g.indexOf("-->",h+1)===-1;var i=ma.exec(g);i===null?c+=g+(d?Sa:p):c+=g.substr(0,i.index)+i[1]+i[2]+L+i[3]+B}return c+=this.strings[a],c},b.prototype.getTemplateElement=function(){var a=document.createElement("template");return a.innerHTML=this.getHTML(),a},b}(),na=function(b){return b===null||!(typeof b==="object"||typeof b==="function")},wa=function(b){return Array.isArray(b)||!!(b&&b[Symbol.iterator])},xa=function(){function b(a,c,d){this.dirty=!0,this.element=a,this.name=c,this.strings=d,this.parts=[];for(var f=0;f<d.length-1;f++)this.parts[f]=this._createPart()}return b.prototype._createPart=function(){return new ya(this)},b.prototype._getValue=function(){for(var a,c,d=this.strings,f=d.length-1,g="",h=0;h<f;h++){g+=d[h];var i=this.parts[h];if(i!==void 0){var j=i.value;if(na(j)||!wa(j))g+=typeof j==="string"?j:String(j);else try{for(var k=(a=void 0,__values(j)),n=k.next();!n.done;n=k.next()){var w=n.value;g+=typeof w==="string"?w:String(w)}}catch(y){a={error:y}}finally{try{n&&!n.done&&(c=k.return)&&c.call(k)}finally{if(a)throw a.error}}}}return g+=d[f],g},b.prototype.commit=function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))},b}(),ya=function(){function b(a){this.value=void 0,this.committer=a}return b.prototype.setValue=function(a){a!==x&&(!na(a)||a!==this.value)&&(this.value=a,s(a)||(this.committer.dirty=!0))},b.prototype.commit=function(){for(;s(this.value);){var a=this.value;this.value=x,a(this)}if(this.value===x)return;this.committer.commit()},b}(),za=function(){function b(a){this.value=void 0,this.__pendingValue=void 0,this.options=a}return b.prototype.appendInto=function(a){this.startNode=a.appendChild(O()),this.endNode=a.appendChild(O())},b.prototype.insertAfterNode=function(a){this.startNode=a,this.endNode=a.nextSibling},b.prototype.appendIntoPart=function(a){a.__insert(this.startNode=O()),a.__insert(this.endNode=O())},b.prototype.insertAfterPart=function(a){a.__insert(this.startNode=O()),this.endNode=a.endNode,a.endNode=this.startNode},b.prototype.setValue=function(a){this.__pendingValue=a},b.prototype.commit=function(){if(this.startNode.parentNode===null)return;for(;s(this.__pendingValue);){var a=this.__pendingValue;this.__pendingValue=x,a(this)}var c=this.__pendingValue;if(c===x)return;na(c)?c!==this.value&&this.__commitText(c):c instanceof va?this.__commitTemplateResult(c):c instanceof Node?this.__commitNode(c):wa(c)?this.__commitIterable(c):c===H?(this.value=H,this.clear()):this.__commitText(c)},b.prototype.__insert=function(a){this.endNode.parentNode.insertBefore(a,this.endNode)},b.prototype.__commitNode=function(a){if(this.value===a)return;this.clear(),this.__insert(a),this.value=a},b.prototype.__commitText=function(a){var c=this.startNode.nextSibling;a=a==null?"":a;var d=typeof a==="string"?a:String(a);c===this.endNode.previousSibling&&c.nodeType===3?c.data=d:this.__commitNode(document.createTextNode(d)),this.value=a},b.prototype.__commitTemplateResult=function(a){var c=this.options.templateFactory(a);if(this.value instanceof ua&&this.value.template===c)this.value.update(a.values);else{var d=new ua(c,a.processor,this.options),f=d._clone();d.update(a.values),this.__commitNode(f),this.value=d}},b.prototype.__commitIterable=function(a){var c,d;Array.isArray(this.value)||(this.value=[],this.clear());var f=this.value,g=0,h;try{for(var i=__values(a),j=i.next();!j.done;j=i.next()){var k=j.value;h=f[g],h===void 0&&(h=new b(this.options),f.push(h),g===0?h.appendIntoPart(this):h.insertAfterPart(f[g-1])),h.setValue(k),h.commit(),g++}}catch(n){c={error:n}}finally{try{j&&!j.done&&(d=i.return)&&d.call(i)}finally{if(c)throw c.error}}g<f.length&&(f.length=g,this.clear(h&&h.endNode))},b.prototype.clear=function(a){a===void 0&&(a=this.startNode),m(this.startNode.parentNode,a.nextSibling,this.endNode)},b}(),Ta=function(){function b(a,c,d){this.value=void 0,this.__pendingValue=void 0;if(d.length!==2||d[0]!==""||d[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=a,this.name=c,this.strings=d}return b.prototype.setValue=function(a){this.__pendingValue=a},b.prototype.commit=function(){for(;s(this.__pendingValue);){var a=this.__pendingValue;this.__pendingValue=x,a(this)}if(this.__pendingValue===x)return;var c=!!this.__pendingValue;this.value!==c&&(c?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=c),this.__pendingValue=x},b}(),Ua=function(b){__extends(a,b);function a(c,d,f){var g=b.call(this,c,d,f)||this;return g.single=f.length===2&&f[0]===""&&f[1]==="",g}return a.prototype._createPart=function(){return new Va(this)},a.prototype._getValue=function(){return this.single?this.parts[0].value:b.prototype._getValue.call(this)},a.prototype.commit=function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())},a}(xa),Va=function(b){__extends(a,b);function a(){return b!==null&&b.apply(this,arguments)||this}return a}(ya),Aa=!1;(function(){try{var b={get capture(){return Aa=!0,!1}};window.addEventListener("test",b,b),window.removeEventListener("test",b,b)}catch(a){}})();var Wa=function(){function b(a,c,d){var f=this;this.value=void 0,this.__pendingValue=void 0,this.element=a,this.eventName=c,this.eventContext=d,this.__boundHandleEvent=function(g){return f.handleEvent(g)}}return b.prototype.setValue=function(a){this.__pendingValue=a},b.prototype.commit=function(){for(;s(this.__pendingValue);){var a=this.__pendingValue;this.__pendingValue=x,a(this)}if(this.__pendingValue===x)return;var c=this.__pendingValue,d=this.value,f=c==null||d!=null&&(c.capture!==d.capture||c.once!==d.once||c.passive!==d.passive),g=c!=null&&(d==null||f);f&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),g&&(this.__options=Xa(c),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=c,this.__pendingValue=x},b.prototype.handleEvent=function(a){typeof this.value==="function"?this.value.call(this.eventContext||this.element,a):this.value.handleEvent(a)},b}(),Xa=function(b){return b&&(Aa?{capture:b.capture,passive:b.passive,once:b.once}:b.capture)},Ya=function(){function b(){}return b.prototype.handleAttributeExpressions=function(a,c,d,f){var g=c[0];if(g==="."){var h=new Ua(a,c.slice(1),d);return h.parts}if(g==="@")return[new Wa(a,c.slice(1),f.eventContext)];if(g==="?")return[new Ta(a,c.slice(1),d)];var i=new xa(a,c,d);return i.parts},b.prototype.handleTextExpression=function(a){return new za(a)},b}(),Za=new Ya();function _a(b){var a=Ba.get(b.type);a===void 0&&(a={stringsArray:new WeakMap(),keyString:new Map()},Ba.set(b.type,a));var c=a.stringsArray.get(b.strings);if(c!==void 0)return c;var d=b.strings.join(B);return c=a.keyString.get(d),c===void 0&&(c=new Qa(b,b.getTemplateElement()),a.keyString.set(d,c)),a.stringsArray.set(b.strings,c),c}var Ba=new Map(),Ca=new WeakMap(),Z=function(b,a,c){var d=Ca.get(a);d===void 0&&(m(a,a.firstChild),Ca.set(a,d=new za(Object.assign({templateFactory:_a},c))),d.appendInto(a)),d.setValue(b),d.commit()};typeof window!=="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");var z=function(b){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];return new va(b,a,"html",Za)},I=function(b){return document.getElementById(b)},P=function(b){return parseInt(b.closest("section").id)},oa=function(b){return parseInt(b.closest(".field").id)},ga=function(){return Math.round(new Date().getTime()*Math.random())},pa=function(b){return b.replace(/\W+|[-_]/g,"-")};function T(b,a){var c,d,f,g,h,i,j;return __generator(this,function(k){switch(k.label){case 0:k.trys.push([0,7,8,9]),c=__values(b),d=c.next(),k.label=1;case 1:return d.done?[3,6]:(f=d.value,[4,{section:f,parent:a}]);case 2:return k.sent(),g=f.children,g?[5,__values(T(f.children,f))]:[3,4];case 3:g=k.sent(),k.label=4;case 4:g,k.label=5;case 5:return d=c.next(),[3,1];case 6:return[3,9];case 7:return h=k.sent(),i={error:h},[3,9];case 8:try{d&&!d.done&&(j=c.return)&&j.call(c)}finally{if(i)throw i.error}return[7];case 9:return[2]}})}function ca(b){var a,c,d;try{for(var f=__values(T(e.now.children)),g=f.next();!g.done;g=f.next()){var h=g.value,i=h.section,j=h.parent;if(i.id==b){d=i;break}}}catch(k){a={error:k}}finally{try{g&&!g.done&&(c=f.return)&&c.call(f)}finally{if(a)throw a.error}}return d}function Da(b){var a=b.closest("section"),c=a.getAttribute("data-section-depth");return parseInt(c)}function Ea(b,a,c){var d,f=b[a]||[],g=f[c];f.splice(c,1),f.splice(c-1,0,g),Q(),F(),e.hasChanged=!0,document.activeElement.blur(),(d=document.querySelector('[id="'+g.id+'"] .moveUp'))===null||d===void 0?void 0:d.focus()}function Fa(b,a,c){var d,f=b[a]||[],g=f[c];f.splice(c,1),f.splice(c+1,0,g),Q(),F(),e.hasChanged=!0,document.activeElement.blur(),(d=document.querySelector('[id="'+g.id+'"] .moveDown'))===null||d===void 0?void 0:d.focus()}function qa(){var b,a,c,d;e.now.selected.fieldType=((c=e.now.fieldTypes)===null||c===void 0?void 0:c[0])||{},e.now.selected.globalType=((d=e.now.globalTypes)===null||d===void 0?void 0:d[0])||{};try{for(var f=__values(T(e.now.children)),g=f.next();!g.done;g=f.next()){var h=g.value,i=h.section,j=h.parent;if(!i.fields.length)continue;i.fields.map(function(k){var n;k.type=e.now.fieldTypes.find(function(w){var y;return w.id==((y=k.type)===null||y===void 0?void 0:y.id)})||((n=e.now.fieldTypes)===null||n===void 0?void 0:n[0])})}}catch(k){b={error:k}}finally{try{g&&!g.done&&(a=f.return)&&a.call(f)}finally{if(b)throw b.error}}}var ha=function(){function b(a){a===void 0&&(a=0),this.id=ga(),this.depth=a,this.text="",this.html="",this.children=[],this.fields=[]}return b}(),$a=function(){function b(){this.id=ga(),this.value="",this.type=0}return b}(),ia=function(){function b(a){this.id=ga(),this.name=a,this.css=""}return b}(),ab=function(){function b(a){this.id=ga(),this.name=a}return b}(),Ga=function(b){__extends(a,b);function a(c){var d=b.call(this,c)||this;return d.type="field type",d.css="",d}return a}(ab),M=["Chapter","Section","Block"],da={h1:"Lvl 1 Heading",h2:"Lvl 2 Heading",h3:"Lvl 3 Heading",h4:"Lvl 4 Heading",h5:"Lvl 5 Heading",h6:"Lvl 6 Heading",hr:"Horizontal Rules",p:"Paragraph",blockquote:"Block Quote",ul:"Unordered List",ol:"Ordered List",li:"List Item",a:"Link",strong:"Bolded Text",em:"Italic Text",code:"Code",img:"Image"},J={previewPane:I("preview"),toolbar:I("toolbar"),contentEditorPane:I("content_editor"),styleEditorPane:I("style_editor"),modal:I("modal"),customStyles:I("custom_styles"),walkThroughDialogue:I("walkthrough_dialogue"),mobileNav:I("mobile_nav")},U={throttle:60,mobileBreakpoint:960,saveInterval:2000,zoom:{min:.5,max:2,interval:.1}},Ha;try{Ha=JSON.parse(localStorage.getItem("State"))}catch(b){console.log("No previous data found.")}var e=Ha||{now:{children:[],fieldTypes:[],globalTypes:M.map(function(b){return new ia(b)}).concat(Object.values(da).map(function(b){return new ia(b)})),selected:{fieldType:{},globalType:{}},editing:{}},nowIndex:0,settings:{zoom:1,darkMode:!1,advancedUI:!1,messagesShown:!1},walkthroughIndex:0,history:[],hasChanged:!1,isNewUser:!0,isMobile:innerWidth<=U.mobileBreakpoint,lastSaved:new Date(),forExport:""},bb=function(b){var a,c,d,f=P(b.target),g=Da(b.target),h;try{for(var i=__values(T(e.now.children,e.now)),j=i.next();!j.done;j=i.next()){var k=j.value,n=k.section,w=k.parent;if(n.id==f){var y=new ha(g);w.children.push(y),h=y.id;break}}}catch(r){a={error:r}}finally{try{j&&!j.done&&(c=i.return)&&c.call(i)}finally{if(a)throw a.error}}e.hasChanged=!0,Q(),e.isMobile||((d=document.querySelector('[id="'+h+'"] textarea'))===null||d===void 0?void 0:d.focus())},cb=function(b){var a,c,d,f=P(b.target),g=Da(b.target),h;try{for(var i=__values(T(e.now.children,e.now)),j=i.next();!j.done;j=i.next()){var k=j.value,n=k.section,w=k.parent;if(n.id==f){var y=new ha(g+1);n.children.unshift(y),h=y.id;break}}}catch(r){a={error:r}}finally{try{j&&!j.done&&(c=i.return)&&c.call(i)}finally{if(a)throw a.error}}e.hasChanged=!0,Q(),e.isMobile||((d=document.querySelector('[id="'+h+'"] textarea'))===null||d===void 0?void 0:d.focus())},db=function(b){var a,c,d=P(b.target),f=function(n,w){if(n.id!=d)return"continue";w.children=w.children.filter(function(y){return y!=n})};try{for(var g=__values(T(e.now.children,e.now)),h=g.next();!h.done;h=g.next()){var i=h.value,j=i.section,k=i.parent;f(j,k)}}catch(n){a={error:n}}finally{try{h&&!h.done&&(c=g.return)&&c.call(g)}finally{if(a)throw a.error}}e.hasChanged=!0,F(),Q()},eb=function(b){var a=P(b.target),c=ca(a);c.text=b.target.value,e.hasChanged=!0,F()},ja={addSiblingSection:bb,addChildSection:cb,removeSection:db,updateSection:eb},fb=function(b){var a,c=P(b.target),d=ca(c),f=new $a();f.type=e.now.fieldTypes[0],d.fields.push(f),e.hasChanged=!0,Q(),e.isMobile||((a=document.querySelector('[id="'+f.id+'"] input'))===null||a===void 0?void 0:a.focus())},gb=function(b){var a=P(b.target),c=ca(a),d=oa(b.target);c.fields=c.fields.filter(function(f){return f.id!=d}),e.hasChanged=!0,Q(),F()},hb=function(b){var a=P(b.target),c=ca(a),d=oa(b.target),f=c.fields.find(function(g){return g.id==d});f.value=b.target.value,e.hasChanged=!0,F()},ib=function(b){var a=b.target.value,c=oa(b.target),d=P(b.target),f=ca(d),g=f.fields.find(function(h){return h.id==c});g.type=e.now.fieldTypes.find(function(h){return h.id==a}),e.hasChanged=!0,F()},ka={addField:fb,removeField:gb,updateFieldValue:hb,updateFieldType:ib},jb=function(b){var a=b.target.textContent||"";b.target.id.includes("global")&&(e.now.selected.globalType.css=a,e.hasChanged=!0),b.target.id.includes("field")&&(e.now.selected.fieldType.css=a,e.hasChanged=!0),Na()},ra=function(b){var a=b.target||b,c=function(d,f){return'<span class="token '+f+'">'+d+"</span>"};a.innerHTML=a.innerText.replace(/\n/g,"").replace(/;/g,c(";","newline")).replace(/[,:](?!\s)/g,function(d){return d+" "})},kb=function(b){var a=b.target.value,c=I("field_type_styles"),d=e.now.fieldTypes.find(function(g){return g.id==a});if(d)d.css||(d.css=""),e.now.selected.fieldType=d;else{var f={id:a,css:""};e.now.fieldTypes.push(f),e.now.selected.fieldType=f}c.innerHTML=e.now.selected.fieldType.css,ra(c),e.hasChanged=!0,F()},lb=function(b){var a=I("global_type_styles"),c=b.target.value,d=e.now.globalTypes.find(function(g){return g.name==c});if(d)d.css||(d.css=""),e.now.selected.globalType=d;else{var f={id:c,css:""};e.now.globalTypes.push(f),e.now.selected.globalType=f}a.innerHTML=e.now.selected.globalType.css,ra(a),e.hasChanged=!0,F()},V={updateStyles:jb,updateCurrentFieldType:kb,updateCurrentGlobalType:lb,formatCSS:ra},mb=function(b){var a;b=="field type"&&(e.now.fieldTypes=e.now.fieldTypes.filter(function(c){return c.id!=e.now.selected.fieldType.id}),e.now.selected.fieldType=((a=e.now.fieldTypes)===null||a===void 0?void 0:a[0])||{}),e.now.editing={},e.hasChanged=!0,X(),Y(null)},nb=function(b){e.now.editing[b.target.name]=b.target.value,e.hasChanged=!0,X()},ob=function(){var b,a;e.now.selected.fieldType=e.now.fieldTypes[e.now.fieldTypes.length-1];if(e.now.fieldTypes.length==1)try{for(var c=__values(T(e.now.children)),d=c.next();!d.done;d=c.next()){var f=d.value,g=f.section,h=f.parent;g.fields.map(function(i){return i.type=e.now.fieldTypes[0]})}}catch(i){b={error:i}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(b)throw b.error}}},pb=function(b){var a;e.now.editing.name=e.now.editing.name.trim();if(!e.now.editing.name.length){Y(null);return}b=="field type"&&(e.now.fieldTypes.push(new Ga(e.now.editing.name)),ob(),(a=J.styleEditorPane.querySelector("code"))===null||a===void 0?void 0:a.focus()),e.now.editing={},e.hasChanged=!0,X(),Y(null)},sa={removeType:mb,updateType:nb,saveNewType:pb},qb=function(b){var a=e.settings.darkMode;document.documentElement.classList.toggle("dark_mode",!a),e.settings.darkMode=!a,e.hasChanged=!0,_()},rb=function(b){var a=e.settings.advancedUI;document.documentElement.classList.toggle("advanced",!a),e.settings.advancedUI=!a,e.hasChanged=!0,_()},sb=function(b){return window.print()},tb=function(b){var a=b.target.files[0],c=new FileReader();c.onerror=function(){console.error(this.error)},c.onload=function(){var d=JSON.parse(this.result);Object.keys(e).map(function(f){return e[f]=d[f]}),qa(),X()},document.body.classList.add("importing"),c.readAsText(a)},ub=function(b){e.now.children=[new ha()],e.now.fieldTypes=[],e.now.globalTypes=M.map(function(a){return new ia(a)}).concat(Object.values(da).map(function(a){return new ia(a)})),e.now.editing={},e.now.selected={fieldType:{},globalType:{}},X(),e.hasChanged=!0},vb=function(b){b===void 0&&(b="");var a=b.toLowerCase(),c=e.settings.zoom;a=="out"&&c>U.zoom.min&&(c=c-U.zoom.interval),a=="in"&&c<U.zoom.max&&(c=c+U.zoom.interval),c!=e.settings.zoom&&(e.settings.zoom=c,e.hasChanged=!0,_())},W={toggleDarkMode:qb,toggleAdvancedUI:rb,printDocument:sb,importData:tb,clearData:ub,zoom:vb},Ia=function(b){var a=b===void 0?{}:b,c=a.global,d=c===void 0?!1:c,f=a.field,g=f===void 0?{}:f,h,i,j,k;if(!((h=e.now.fieldTypes)===null||h===void 0?void 0:h.length))return;var n=d?(i=e.now.selected.fieldType)===null||i===void 0?void 0:i.id:(k=(j=g)===null||j===void 0?void 0:j.type)===null||k===void 0?void 0:k.id;return z(__makeTemplateObject([`
    <select name=type @input=`,`>

        `,`

    </select>`],[`
    <select name=type @input=`,`>

        `,`

    </select>`]),d?V.updateCurrentFieldType:ka.updateFieldType,e.now.fieldTypes.map(function(w){return z(__makeTemplateObject([`
            <option value=`," ?selected=",`>
                `,`
            </option>
        `],[`
            <option value=`," ?selected=",`>
                `,`
            </option>
        `]),w.id,w.id==n,w.name)}))},wb=function(b,a,c){return z(__makeTemplateObject([`
<div 
class=field 
id=`,`>

    <input 
    placeholder="Field value..."
    type=text 
    .value=`,` 
    @input=`,` />

    `,`

    <button 
    @click=`,` 
    class=remove>
        Remove
    </button>

    <button
    data-icon
    @click=`,`
    ?disabled=`,`
    class="move moveDown">
    </button>

    <button
    data-icon
    @click=`,`
    ?disabled=`,` 
    class="move moveUp">
    </button>

</div>`],[`
<div 
class=field 
id=`,`>

    <input 
    placeholder="Field value..."
    type=text 
    .value=`,` 
    @input=`,` />

    `,`

    <button 
    @click=`,` 
    class=remove>
        Remove
    </button>

    <button
    data-icon
    @click=`,`
    ?disabled=`,`
    class="move moveDown">
    </button>

    <button
    data-icon
    @click=`,`
    ?disabled=`,` 
    class="move moveUp">
    </button>

</div>`]),b.id,b.value,ka.updateFieldValue,Ia({field:b}),ka.removeField,Fa.bind(void 0,a,"fields",c),c>=a.fields.length-1,Ea.bind(void 0,a,"fields",c),!c)};function Ja(b,a,c){var d=e.now.children.length,f=b.depth,g=f==M.length-1;return z(__makeTemplateObject([`
    <section 
    id=`,` 
    data-section-depth=`,`>

        <div class=fields>
            `,`
        </div>

        <textarea 
        id="`,`-text"
        placeholder=`,` 
        @input=`,` 
        .value=`,`>
        </textarea>

        <div class=actions>

            <button 
            data-icon=add_another
            title=`,`
            @click=`,`>
            </button>

            `,`

            <button 
            class=add
            data-icon
            title="Add Field"
            @click=`,`>
            </button>

            `,`

            `,`

        </div>

        `,`

    </section>`],[`
    <section 
    id=`,` 
    data-section-depth=`,`>

        <div class=fields>
            `,`
        </div>

        <textarea 
        id="`,`-text"
        placeholder=`,` 
        @input=`,` 
        .value=`,`>
        </textarea>

        <div class=actions>

            <button 
            data-icon=add_another
            title=`,`
            @click=`,`>
            </button>

            `,`

            <button 
            class=add
            data-icon
            title="Add Field"
            @click=`,`>
            </button>

            `,`

            `,`

        </div>

        `,`

    </section>`]),b.id,b.depth,b.fields.map(function(h,i){return wb(h,b,i)}),b.id,"Write something for this "+M[f].toLowerCase()+"...",ja.updateSection,b.text,"Add "+M[f],ja.addSiblingSection,g?"":z(__makeTemplateObject([`
            <button 
            data-icon=add_sub
            title=`,`
            @click=`,`>
            </button>`],[`
            <button 
            data-icon=add_sub
            title=`,`
            @click=`,`>
            </button>`]),"Add "+M[f+1],ja.addChildSection),ka.addField,d>1||f?z(__makeTemplateObject([`
            <button 
            class=remove
            @click=`,`>
            Remove
            </button>`],[`
            <button 
            class=remove
            @click=`,`>
            Remove
            </button>`]),ja.removeSection):"",a.children.length>1?z(__makeTemplateObject([`

            <button 
            class="move moveDown" 
            data-icon
            title="Move Down"
            ?disabled=`,` 
            @click=`,`>
            </button>

            <button 
            class="move moveUp"
            data-icon
            title="Move Up"
            ?disabled=`,` 
            @click=`,`>
            </button>
            
            `],[`

            <button 
            class="move moveDown" 
            data-icon
            title="Move Down"
            ?disabled=`,` 
            @click=`,`>
            </button>

            <button 
            class="move moveUp"
            data-icon
            title="Move Up"
            ?disabled=`,` 
            @click=`,`>
            </button>
            
            `]),c>=a.children.length-1,Fa.bind(this,a,"children",c),!c,Ea.bind(this,a,"children",c)):"",b.children.length?b.children.map(function(h,i){return Ja(h,b,i)}):"")}var Ka=function(b){var a={"!":"33","#":"35","&":"38;","(":"40",")":"41","*":"42","+":"43","-":"45",".":"46","<":"60;",">":"62;","[":"91","\\":"92","]":"93",_:"95","`":"96","{":"123","}":"125","~":"126"},c=/(^|\s)(> )+(.|\n)+?(?=$|\n(?!>))/g,d="[0-9]+\\. ",f="[-+*] ",g=function(l){return"&#"+(a[l]||l)},h=function(l){return l.replace(/[&<>]/g,g)},i=function(l){return l.trim().slice(1,-1)},j=function(l,v){return"<"+l+">"+v+"</"+l+">"},k=function(l){var v=new RegExp("[^|\\n]"+d).test(l),E=new RegExp("(^|\\n)"+(v?d:f)),ba=l.split(E).filter(function(fa){return fa.trim().length});return j(v?"ol":"ul",ba.map(function(fa){return j("li",fa)}).join(""))},n=function(l){l=l.trim();var v=l.indexOf(" ");return j("h"+v,l.slice(v).replace(/#+$/,"").trim())},w=function(l){var v=l.trim().split(/\n/);return j("h"+(v[1].indexOf("-")>-1?2:1),v[0])},y=function(l){var v=l.slice(1,-1).split("]("),E=v[1].split(/ ["`']/)[1];return'<a href="'+v[1]+'" '+(E?'title="'+E+'"':"")+">"+v[0]+"</a>"},r=function(l){var v=l.split(/["`']/),E=v[0].trim().replace(/^<|>$/g,""),ba=v[1];return' <a href="'+E+'" '+(ba?'title="'+ba+'"':"")+">"+E+"</a>"},C=function(l){var v=l.slice(2,-1).split("]("),E=v[1].split(/ ["`']/)[1];return'<img src="'+v[1]+'" '+(E?'title="'+E+'"':"")+' alt="'+v[0]+'">'},$=function(l){var v=__read(l.trim().split(/\n+/)),E=v[0],ba=v.slice(1),fa=h(ba.slice(0,-1).join("\r")).trim();return j("pre",'<code class="language-'+E.slice(3)+'">'+fa+"</code>")},K=function(l){return l=j("blockquote",l.replace(/^ *?> /gm,"")),l.replace(c,K)},D=function(l){return' <a href="'+l+'">'+l.trim()+"</a>"},R=function(l){return j("p",l.trim())},S=function(l){return j("strong",l.slice(2,-2))},N=function(l){return j("em",i(l))},G=function(l){return j("del",i(l))},aa=function(l){return j("code",h(i(l)))};return b.replace(/\r+/g,`
`).replace(/\\[-*_\\`#~+.!(){}[\]]/g,function(l){return g(l.slice(1))}).replace(/(^|\n).+?\n[-=]+(?=$|\n)/g,w).replace(/(^|\n)#+? (.|\n)+?(?=$|\n)/g,n).replace(/(^|\n)([-*_] ?){3,}(?=$|\n)/g,"<hr>").replace(/(^|\n)([0-9]+\.|[-+*]) (.|\n)+?(?=$|[\s\n]{3,})/g,k).replace(c,K).replace(/(^|\n)```(.|\n)+?```(?=$|\n)/g,$).replace(/  (\n|$)/g,"<br>").replace(/!\[.+?\]\(.+?\)/g,C).replace(/\[.+?\]\(.+?\)/g,y).replace(/<(https?:\/\/|www).+?>( (".+?")|('.+?'))?(?=$|\n| )/g,r).replace(/(^|\n| )(https?:\/\/|www)(.+?)+?(?=$|\n| )/g,D).replace(/\s[*_](?=\s)/g,function(l){return l.slice(0,1)+g(l.slice(1))}).replace(/[*_]{2}.+?[*_]{2}/gm,S).replace(/[*_].+?[*_]/gm,N).replace(/~.+?~/gm,G).replace(/`.+?`/gm,aa).replace(/(^|\n\n+)(?!<[huol]).+?(?=$|\n\n+)/gi,R)},xb=function(b){var a,c=e.now.fieldTypes.find(function(f){var g,h;return f.id==((h=(g=b)===null||g===void 0?void 0:g.type)===null||h===void 0?void 0:h.id)}),d=document.createElement("div");return d.innerHTML=Ka(b.value),/<p>/.test(d.innerHTML)&&(d.innerHTML=d.firstElementChild.innerHTML),z(__makeTemplateObject([`
    <div class=`,`>
        `,`
    </div>`],[`
    <div class=`,`>
        `,`
    </div>`]),pa(((a=c)===null||a===void 0?void 0:a.name)||""),d)};function La(b){var a=document.createElement("div");return a.classList.add("content"),a.innerHTML=Ka(b.text),z(__makeTemplateObject([`
    <section class=`,`>
    
        `,`
    
        `,`
    
        `,`
    
    </section>`],[`
    <section class=`,`>
    
        `,`
    
        `,`
    
        `,`
    
    </section>`]),M[b.depth],b.fields.map(function(c){return xb(c)}),b.text.length?a:"",b.children.map(function(c){return La(c)}))}var yb=function(){var b;return z(__makeTemplateObject([`

<div class="heading">
    Style Editor
    <span tabindex="0" data-tooltip="This pane is for editing your document's styles. Apply valid CSS rules to any custom field type or global element."></span>
</div>

<section id=manageFieldTypes>

    <div class=actions>

        <label>Field Styles</label>

        `,`

        `,`

        <button 
        class=add 
        data-icon
        title="New Field Type"
        @click=`,`>
        </button>
        
    </div>

    <code 
    spellcheck=false
    id=field_type_styles
    class=language-css 
    contenteditable=true 
    @focusout=`,`
    @keyup=`,`></code>
    
</section>


<section id=manageGlobalTypes>

    <div class=actions>

        <label>Global Styles</label>

        <select id=global-style-select @input=`,`>

            <optgroup label=Layout>
            `,`
            </optgroup>

            <optgroup label=Elements>
                `,`
            </optgroup>
        </select>

    </div>

    <code
    spellcheck=false
    id=global_type_styles
    class=language-css
    contenteditable=true
    @focusout=`,`
    @keyup=`,`></code>

</section>
`],[`

<div class="heading">
    Style Editor
    <span tabindex="0" data-tooltip="This pane is for editing your document's styles. Apply valid CSS rules to any custom field type or global element."></span>
</div>

<section id=manageFieldTypes>

    <div class=actions>

        <label>Field Styles</label>

        `,`

        `,`

        <button 
        class=add 
        data-icon
        title="New Field Type"
        @click=`,`>
        </button>
        
    </div>

    <code 
    spellcheck=false
    id=field_type_styles
    class=language-css 
    contenteditable=true 
    @focusout=`,`
    @keyup=`,`></code>
    
</section>


<section id=manageGlobalTypes>

    <div class=actions>

        <label>Global Styles</label>

        <select id=global-style-select @input=`,`>

            <optgroup label=Layout>
            `,`
            </optgroup>

            <optgroup label=Elements>
                `,`
            </optgroup>
        </select>

    </div>

    <code
    spellcheck=false
    id=global_type_styles
    class=language-css
    contenteditable=true
    @focusout=`,`
    @keyup=`,`></code>

</section>
`]),Ia({global:!0}),((b=e.now.fieldTypes)===null||b===void 0?void 0:b.length)?z(__makeTemplateObject([`
        <button 
        data-icon
        title="Edit Field Type"
        @click=`,`>
        </button>`],[`
        <button 
        data-icon
        title="Edit Field Type"
        @click=`,`>
        </button>`]),Y.bind(void 0,"field type",!0)):"",Y.bind(void 0,"field type",!1),V.formatCSS,V.updateStyles,V.updateCurrentGlobalType,M.map(function(a){var c;return z(__makeTemplateObject([`
                <option
                value=`,`
                ?selected=`,`>
                    `,`s
                </option>
            `],[`
                <option
                value=`,`
                ?selected=`,`>
                    `,`s
                </option>
            `]),a,a==((c=e.now.selected.globalType)===null||c===void 0?void 0:c.name),a)}),Object.values(da).map(function(a){var c;return z(__makeTemplateObject([`
                    <option 
                    label=`,`
                    value=`,`
                    ?selected=`,`>
                        `,`s
                    </option>
                `],[`
                    <option 
                    label=`,`
                    value=`,`
                    ?selected=`,`>
                        `,`s
                    </option>
                `]),a,a,a==((c=e.now.selected.globalType)===null||c===void 0?void 0:c.name),a)}),V.formatCSS,V.updateStyles)},zb=function(){return z(__makeTemplateObject([`

`,`

`,`

`,`
`],[`

`,`

`,`

`,`
`]),e.now.fieldTypes.map(function(b){return"#preview ."+pa(b.name).trim()+"{"+b.css+"}"}),M.map(function(b){var a,c=e.now.globalTypes.find(function(d){return d.name==b});return"#preview ."+pa(b).trim()+"{"+((a=c)===null||a===void 0?void 0:a.css)+"}"}),Object.keys(da).map(function(b){var a,c=da[b],d=e.now.globalTypes.find(function(f){return f.name==c});return"#preview "+b+" {"+((a=d)===null||a===void 0?void 0:a.css)+"}"}))},Ma=function(b){b===void 0&&(b=0);var a=e.nowIndex+b;e.now=JSON.parse(e.history[a]),e.nowIndex=a,qa(),X()},Ab=function(){var b,a,c=e.settings;return z(__makeTemplateObject([`
    <!-- Undo/Redo -->
    <div class=configuration id=undo_redo>
        <button data-icon title=Undo ?disabled=`," @click=",`>
        </button>
        <button data-icon title=Redo ?disabled=`,`
            @click=`,`>
        </button>
    </div>
    
    <!-- Zoom -->
    <div class=configuration id=zoom>
        <button data-icon title="Zoom Out" @click=`,`>
        </button>
        <button data-icon title="Zoom In" @click=`,`>
        </button>
        <label>`,`</label>
    </div>
    
    <!-- Toggle Dark Mode -->
    <div class=configuration>
        <button data-icon title=`,`
            ?aria-pressed=`," @click=",` id=dark_mode_toggle>
        </button>
    </div>
    
    <!-- Toggle Advanced UI -->
    <div class=configuration id=advancedUI_toggle>
        <button data-icon id="advanced_toggle" ?aria-pressed=`," title="," @click=",`>
        </button>
    </div>
    
    <!-- Print Document -->
    <div class=configuration id=printDocument>
        <button data-icon title=Print @click=`,`>
        </button>
    </div>
    
    <!-- Import and Export Data -->
    <div class=configuration id=import_export>
        <input aria-hidden="true" id=importData type=file accept=.json @input=`,`>
        <label data-icon title="Import Data" class="fileInput secondary" for=importData>
        </label>
        <a class="button primary" data-icon title="Export Data" id=exportData .href=`," download=",`>
        </a>
        <!-- Clear Data -->
        <button data-icon title="Clear Data" class=destructive @click=`,`>
        </button>
    </div>
    
    <!-- Last Saved -->
    <div class=configuration id=savedIndicator>
        Saved: `,`
    </div>`],[`
    <!-- Undo/Redo -->
    <div class=configuration id=undo_redo>
        <button data-icon title=Undo ?disabled=`," @click=",`>
        </button>
        <button data-icon title=Redo ?disabled=`,`
            @click=`,`>
        </button>
    </div>
    
    <!-- Zoom -->
    <div class=configuration id=zoom>
        <button data-icon title="Zoom Out" @click=`,`>
        </button>
        <button data-icon title="Zoom In" @click=`,`>
        </button>
        <label>`,`</label>
    </div>
    
    <!-- Toggle Dark Mode -->
    <div class=configuration>
        <button data-icon title=`,`
            ?aria-pressed=`," @click=",` id=dark_mode_toggle>
        </button>
    </div>
    
    <!-- Toggle Advanced UI -->
    <div class=configuration id=advancedUI_toggle>
        <button data-icon id="advanced_toggle" ?aria-pressed=`," title="," @click=",`>
        </button>
    </div>
    
    <!-- Print Document -->
    <div class=configuration id=printDocument>
        <button data-icon title=Print @click=`,`>
        </button>
    </div>
    
    <!-- Import and Export Data -->
    <div class=configuration id=import_export>
        <input aria-hidden="true" id=importData type=file accept=.json @input=`,`>
        <label data-icon title="Import Data" class="fileInput secondary" for=importData>
        </label>
        <a class="button primary" data-icon title="Export Data" id=exportData .href=`," download=",`>
        </a>
        <!-- Clear Data -->
        <button data-icon title="Clear Data" class=destructive @click=`,`>
        </button>
    </div>
    
    <!-- Last Saved -->
    <div class=configuration id=savedIndicator>
        Saved: `,`
    </div>`]),e.nowIndex==0,Ma.bind(void 0,-1),e.nowIndex>=e.history.length-1,Ma.bind(void 0,1),W.zoom.bind(void 0,"out"),W.zoom.bind(void 0,"in"),"("+Math.round(c.zoom*100)+"%)","You're in "+(c.darkMode?"Dark":"Light")+" Mode",c.darkMode,W.toggleDarkMode,c.advancedUI,(c.advancedUI?"Disable":"Enable")+" Advanced UI",W.toggleAdvancedUI,W.printDocument,W.importData,(b=e)===null||b===void 0?void 0:b.forExport,`My Data\r
            (`+new Date(e.lastSaved).toLocaleDateString()+").json",W.clearData,new Date(((a=e)===null||a===void 0?void 0:a.lastSaved)||"").toLocaleTimeString("en-us",{timeStyle:"short"}))},Bb=function(b,a){return b?(b=="field type"&&(e.now.editing=a?e.now.selected.fieldType:new Ga()),z(__makeTemplateObject([`
    <div class=content>
    
        <div class=heading>
            `,` Editor
            <span tabindex=0 data-tooltip=`,`>
            </span>
        </div>
    
        <input name=name @input=`," type=text placeholder="," value=",` />
        
            <div class=actions>
        
                <button @click=`,`>
                    Done
                </button>
        
                `,`
        
                <button class=cancel @click=`,`>
                    Cancel
                </button>
        
            </div>
        
        </div>`],[`
    <div class=content>
    
        <div class=heading>
            `,` Editor
            <span tabindex=0 data-tooltip=`,`>
            </span>
        </div>
    
        <input name=name @input=`," type=text placeholder="," value=",` />
        
            <div class=actions>
        
                <button @click=`,`>
                    Done
                </button>
        
                `,`
        
                <button class=cancel @click=`,`>
                    Cancel
                </button>
        
            </div>
        
        </div>`]),e.now.editing.type,"This pane is for renaming or editing your "+e.now.editing.type+" .",sa.updateType,"Name your "+e.now.editing.type+"...",a?e.now.editing.name:"",a?Y.bind(void 0,null):sa.saveNewType.bind(void 0,e.now.editing.type),a?z(__makeTemplateObject([`
                <button class=remove @click=`,`>
                    Delete `,`
                </button>`],[`
                <button class=remove @click=`,`>
                    Delete `,`
                </button>`]),sa.removeType.bind(void 0,e.now.editing.type),e.now.editing.type):"",Y.bind(void 0,null))):""};function X(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(b){return Q(),_(),F(),Oa(),Na(),[2]})})}function F(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(b){return Z(z(__makeTemplateObject([`
        <div class=content>
            `,`
        </div>`],[`
        <div class=content>
            `,`
        </div>`]),e.now.children.map(function(a){return La(a)})),J.previewPane),[2]})})}function _(){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(a){return b=document.documentElement,b.style.setProperty("--preview_zoom",e.settings.zoom),b.classList.toggle("dark_mode",e.settings.darkMode),b.classList.toggle("advanced",e.settings.advancedUI),Z(Ab(),J.toolbar),[2]})})}function Na(){Z(zb(),J.customStyles)}function Y(b,a){a===void 0&&(a=!1),J.modal.classList.toggle("open",b),Z(Bb(b,a),J.modal);if(b)try{J.modal.querySelector("input").focus()}catch(c){}b||(e.now.editing={},_(),Oa(),F())}function Oa(){var b,a,c,d,f;Z(yb(),J.styleEditorPane);try{for(var g=__values(J.styleEditorPane.querySelectorAll("code")),h=g.next();!h.done;h=g.next()){var i=h.value;i.innerHTML="",i.id.includes("field")&&(i.innerText=((c=e.now.selected.fieldType)===null||c===void 0?void 0:c.css)||""),i.id.includes("global")&&(i.innerText=((d=e.now.selected.globalType)===null||d===void 0?void 0:d.css)||""),(f=V)===null||f===void 0?void 0:f.formatCSS({target:i})}}catch(j){b={error:j}}finally{try{h&&!h.done&&(a=g.return)&&a.call(g)}finally{if(b)throw b.error}}}function Q(){Z(z(__makeTemplateObject([`
        <div class=heading>
            Content Editor
            <span tabindex=0
                data-tooltip="This pane is for editing the content of your document. Try nesting content blocks or adding custom fields to a section."></span>
        </div>
        
        `,`
        `],[`
        <div class=heading>
            Content Editor
            <span tabindex=0
                data-tooltip="This pane is for editing the content of your document. Try nesting content blocks or adding custom fields to a section."></span>
        </div>
        
        `,`
        `]),e.now.children.map(function(b,a){return Ja(b,e.now,a)})),J.contentEditorPane)}function Pa(b){return b===void 0&&(b=!1),__awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(c){return!e.hasChanged&&!b?[2]:(localStorage.setItem("State",JSON.stringify(e)),a=JSON.stringify(e,function(d,f){return d=="history"?[]:d=="settings"?{}:f}),e.history.push(JSON.stringify(e.now)),e.nowIndex=e.history.length-1,e.history.length>250&&e.history.splice(0,1),e.hasChanged=!1,e.lastSaved=new Date().getTime(),e.forExport=URL.createObjectURL(new Blob([a],{type:"application/json"})),_(),[2])})})}e.isNewUser&&!e.now.children.length&&(e.now.children.push(new ha()),Pa(!0)),qa(),X(),setInterval(Pa,U.saveInterval),document.body.classList.remove("loading"),e.isMobile=innerWidth<U.mobileBreakpoint;try{for(var la=__values(document.querySelectorAll("[data-icon]")),ea=la.next();!ea.done;ea=la.next()){var Cb=ea.value;Cb.setAttribute("aria-hidden",!0)}}catch(b){q={error:b}}finally{try{ea&&!ea.done&&(t=la.return)&&t.call(la)}finally{if(q)throw q.error}}})();
