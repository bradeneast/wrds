var __extends=this&&this.__extends||function(){var q=function(t,o){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var m in u)u.hasOwnProperty(m)&&(s[m]=u[m])},q(t,o)};return function(t,o){q(t,o);function s(){this.constructor=t}t.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s())}}(),__makeTemplateObject=this&&this.__makeTemplateObject||function(q,t){return Object.defineProperty?Object.defineProperty(q,"raw",{value:t}):q.raw=t,q},__awaiter=this&&this.__awaiter||function(q,t,o,s){function u(m){return m instanceof o?m:new o(function(x){x(m)})}return new(o||(o=Promise))(function(m,x){function F(A){try{p(s.next(A))}catch(L){x(L)}}function B(A){try{p(s.throw(A))}catch(L){x(L)}}function p(A){A.done?m(A.value):u(A.value).then(F,B)}p((s=s.apply(q,t||[])).next())})},__generator=this&&this.__generator||function(q,t){var o={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},s,u,m,x;return x={next:F(0),throw:F(1),return:F(2)},typeof Symbol==="function"&&(x[Symbol.iterator]=function(){return this}),x;function F(p){return function(A){return B([p,A])}}function B(p){if(s)throw new TypeError("Generator is already executing.");for(;o;)try{if(s=1,u&&(m=p[0]&2?u.return:p[0]?u.throw||((m=u.return)&&m.call(u),0):u.next)&&!(m=m.call(u,p[1])).done)return m;(u=0,m)&&(p=[p[0]&2,m.value]);switch(p[0]){case 0:case 1:m=p;break;case 4:return o.label++,{value:p[1],done:!1};case 5:o.label++,u=p[1],p=[0];continue;case 7:p=o.ops.pop(),o.trys.pop();continue;default:if(!(m=o.trys,m=m.length>0&&m[m.length-1])&&(p[0]===6||p[0]===2)){o=0;continue}if(p[0]===3&&(!m||p[1]>m[0]&&p[1]<m[3])){o.label=p[1];break}if(p[0]===6&&o.label<m[1]){o.label=m[1],m=p;break}if(m&&o.label<m[2]){o.label=m[2],o.ops.push(p);break}m[2]&&o.ops.pop(),o.trys.pop();continue}p=t.call(q,o)}catch(A){p=[6,A],u=0}finally{s=m=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},__values=this&&this.__values||function(q){var t=typeof Symbol==="function"&&Symbol.iterator,o=t&&q[t],s=0;if(o)return o.call(q);if(q&&typeof q.length==="number")return{next:function(){return q&&s>=q.length&&(q=void 0),{value:q&&q[s++],done:!q}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=this&&this.__read||function(q,t){var o=typeof Symbol==="function"&&q[Symbol.iterator];if(!o)return q;var s=o.call(q),u,m=[],x;try{for(;(t===void 0||t-- >0)&&!(u=s.next()).done;)m.push(u.value)}catch(F){x={error:F}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(x)throw x.error}}return m},__spread=this&&this.__spread||function(){for(var q=[],t=0;t<arguments.length;t++)q=q.concat(__read(arguments[t]));return q};(function(){var q,t,o=new WeakMap(),s=function(b){return typeof b==="function"&&o.has(b)},u=typeof window!=="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,m=function(b,a,c){for(c===void 0&&(c=null);a!==c;){var e=a.nextSibling;b.removeChild(a),a=e}},x={},F={},B="{{lit-"+String(Math.random()).slice(2)+"}}",p="<!--"+B+"-->",A=new RegExp(B+"|"+p),L="$lit$",Ta=function(){function b(a,c){var e,f;this.parts=[],this.element=c;for(var g=[],h=[],i=document.createTreeWalker(c.content,133,null,!1),j=0,k=-1,n=0,w=a.strings,z=a.values.length;n<z;){var r=i.nextNode();if(r===null){i.currentNode=h.pop();continue}k++;if(r.nodeType===1){if(r.hasAttributes()){for(var C=r.attributes,$=C.length,K=0,D=0;D<$;D++)ta(C[D].name,L)&&K++;for(;K-- >0;){var D=w[n],T=na.exec(D)[2],U=T.toLowerCase()+L,O=r.getAttribute(U);r.removeAttribute(U);var H=O.split(A);this.parts.push({type:"attribute",index:k,name:T,strings:H}),n+=H.length-1}}r.tagName==="TEMPLATE"&&(h.push(r),i.currentNode=r.content)}else if(r.nodeType===3){var C=r.data;if(C.indexOf(B)>=0){for(var $=r.parentNode,K=C.split(A),D=K.length-1,T=0;T<D;T++){var U=void 0,O=K[T];if(O==="")U=P();else{var H=na.exec(O);H!==null&&ta(H[2],L)&&(O=O.slice(0,H.index)+H[1]+H[2].slice(0,-L.length)+H[3]),U=document.createTextNode(O)}$.insertBefore(U,r),this.parts.push({type:"node",index:++k})}K[D]===""?($.insertBefore(P(),r),g.push(r)):r.data=K[D],n+=D}}else if(r.nodeType===8)if(r.data===B){var C=r.parentNode;(r.previousSibling===null||k===j)&&(k++,C.insertBefore(P(),r)),j=k,this.parts.push({type:"node",index:k}),r.nextSibling===null?r.data="":(g.push(r),k--),n++}else for(var C=-1;(C=r.data.indexOf(B,C+1))!==-1;)this.parts.push({type:"node",index:-1}),n++}try{for(var aa=__values(g),l=aa.next();!l.done;l=aa.next()){var r=l.value;r.parentNode.removeChild(r)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(f=aa.return)&&f.call(aa)}finally{if(e)throw e.error}}}return b}(),ta=function(b,a){var c=b.length-a.length;return c>=0&&b.slice(c)===a},Ua=function(b){return b.index!==-1},P=function(){return document.createComment("")},na=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,ua=function(){function b(a,c,e){this.__parts=[],this.template=a,this.processor=c,this.options=e}return b.prototype.update=function(a){var c,e,f,g,h=0;try{for(var i=__values(this.__parts),j=i.next();!j.done;j=i.next()){var k=j.value;k!==void 0&&k.setValue(a[h]),h++}}catch(z){c={error:z}}finally{try{j&&!j.done&&(e=i.return)&&e.call(i)}finally{if(c)throw c.error}}try{for(var n=__values(this.__parts),w=n.next();!w.done;w=n.next()){var k=w.value;k!==void 0&&k.commit()}}catch(z){f={error:z}}finally{try{w&&!w.done&&(g=n.return)&&g.call(n)}finally{if(f)throw f.error}}},b.prototype._clone=function(){for(var a,c=u?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],f=this.template.parts,g=document.createTreeWalker(c,133,null,!1),h=0,i=0,j,k=g.nextNode();h<f.length;){j=f[h];if(!Ua(j)){this.__parts.push(void 0),h++;continue}for(;i<j.index;)i++,k.nodeName==="TEMPLATE"&&(e.push(k),g.currentNode=k.content),(k=g.nextNode())===null&&(g.currentNode=e.pop(),k=g.nextNode());if(j.type==="node"){var n=this.processor.handleTextExpression(this.options);n.insertAfterNode(k.previousSibling),this.__parts.push(n)}else(a=this.__parts).push.apply(a,__spread(this.processor.handleAttributeExpressions(k,j.name,j.strings,this.options)));h++}return u&&(document.adoptNode(c),customElements.upgrade(c)),c},b}(),Va=" "+B+" ",va=function(){function b(a,c,e,f){this.strings=a,this.values=c,this.type=e,this.processor=f}return b.prototype.getHTML=function(){for(var a=this.strings.length-1,c="",e=!1,f=0;f<a;f++){var g=this.strings[f],h=g.lastIndexOf("<!--");e=(h>-1||e)&&g.indexOf("-->",h+1)===-1;var i=na.exec(g);i===null?c+=g+(e?Va:p):c+=g.substr(0,i.index)+i[1]+i[2]+L+i[3]+B}return c+=this.strings[a],c},b.prototype.getTemplateElement=function(){var a=document.createElement("template");return a.innerHTML=this.getHTML(),a},b}(),oa=function(b){return b===null||!(typeof b==="object"||typeof b==="function")},wa=function(b){return Array.isArray(b)||!!(b&&b[Symbol.iterator])},xa=function(){function b(a,c,e){this.dirty=!0,this.element=a,this.name=c,this.strings=e,this.parts=[];for(var f=0;f<e.length-1;f++)this.parts[f]=this._createPart()}return b.prototype._createPart=function(){return new ya(this)},b.prototype._getValue=function(){for(var a,c,e=this.strings,f=e.length-1,g="",h=0;h<f;h++){g+=e[h];var i=this.parts[h];if(i!==void 0){var j=i.value;if(oa(j)||!wa(j))g+=typeof j==="string"?j:String(j);else try{for(var k=(a=void 0,__values(j)),n=k.next();!n.done;n=k.next()){var w=n.value;g+=typeof w==="string"?w:String(w)}}catch(z){a={error:z}}finally{try{n&&!n.done&&(c=k.return)&&c.call(k)}finally{if(a)throw a.error}}}}return g+=e[f],g},b.prototype.commit=function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))},b}(),ya=function(){function b(a){this.value=void 0,this.committer=a}return b.prototype.setValue=function(a){a!==x&&(!oa(a)||a!==this.value)&&(this.value=a,s(a)||(this.committer.dirty=!0))},b.prototype.commit=function(){for(;s(this.value);){var a=this.value;this.value=x,a(this)}if(this.value===x)return;this.committer.commit()},b}(),za=function(){function b(a){this.value=void 0,this.__pendingValue=void 0,this.options=a}return b.prototype.appendInto=function(a){this.startNode=a.appendChild(P()),this.endNode=a.appendChild(P())},b.prototype.insertAfterNode=function(a){this.startNode=a,this.endNode=a.nextSibling},b.prototype.appendIntoPart=function(a){a.__insert(this.startNode=P()),a.__insert(this.endNode=P())},b.prototype.insertAfterPart=function(a){a.__insert(this.startNode=P()),this.endNode=a.endNode,a.endNode=this.startNode},b.prototype.setValue=function(a){this.__pendingValue=a},b.prototype.commit=function(){if(this.startNode.parentNode===null)return;for(;s(this.__pendingValue);){var a=this.__pendingValue;this.__pendingValue=x,a(this)}var c=this.__pendingValue;if(c===x)return;oa(c)?c!==this.value&&this.__commitText(c):c instanceof va?this.__commitTemplateResult(c):c instanceof Node?this.__commitNode(c):wa(c)?this.__commitIterable(c):c===F?(this.value=F,this.clear()):this.__commitText(c)},b.prototype.__insert=function(a){this.endNode.parentNode.insertBefore(a,this.endNode)},b.prototype.__commitNode=function(a){if(this.value===a)return;this.clear(),this.__insert(a),this.value=a},b.prototype.__commitText=function(a){var c=this.startNode.nextSibling;a=a==null?"":a;var e=typeof a==="string"?a:String(a);c===this.endNode.previousSibling&&c.nodeType===3?c.data=e:this.__commitNode(document.createTextNode(e)),this.value=a},b.prototype.__commitTemplateResult=function(a){var c=this.options.templateFactory(a);if(this.value instanceof ua&&this.value.template===c)this.value.update(a.values);else{var e=new ua(c,a.processor,this.options),f=e._clone();e.update(a.values),this.__commitNode(f),this.value=e}},b.prototype.__commitIterable=function(a){var c,e;Array.isArray(this.value)||(this.value=[],this.clear());var f=this.value,g=0,h;try{for(var i=__values(a),j=i.next();!j.done;j=i.next()){var k=j.value;h=f[g],h===void 0&&(h=new b(this.options),f.push(h),g===0?h.appendIntoPart(this):h.insertAfterPart(f[g-1])),h.setValue(k),h.commit(),g++}}catch(n){c={error:n}}finally{try{j&&!j.done&&(e=i.return)&&e.call(i)}finally{if(c)throw c.error}}g<f.length&&(f.length=g,this.clear(h&&h.endNode))},b.prototype.clear=function(a){a===void 0&&(a=this.startNode),m(this.startNode.parentNode,a.nextSibling,this.endNode)},b}(),Wa=function(){function b(a,c,e){this.value=void 0,this.__pendingValue=void 0;if(e.length!==2||e[0]!==""||e[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=a,this.name=c,this.strings=e}return b.prototype.setValue=function(a){this.__pendingValue=a},b.prototype.commit=function(){for(;s(this.__pendingValue);){var a=this.__pendingValue;this.__pendingValue=x,a(this)}if(this.__pendingValue===x)return;var c=!!this.__pendingValue;this.value!==c&&(c?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=c),this.__pendingValue=x},b}(),Xa=function(b){__extends(a,b);function a(c,e,f){var g=b.call(this,c,e,f)||this;return g.single=f.length===2&&f[0]===""&&f[1]==="",g}return a.prototype._createPart=function(){return new Ya(this)},a.prototype._getValue=function(){return this.single?this.parts[0].value:b.prototype._getValue.call(this)},a.prototype.commit=function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())},a}(xa),Ya=function(b){__extends(a,b);function a(){return b!==null&&b.apply(this,arguments)||this}return a}(ya),Aa=!1;(function(){try{var b={get capture(){return Aa=!0,!1}};window.addEventListener("test",b,b),window.removeEventListener("test",b,b)}catch(a){}})();var Za=function(){function b(a,c,e){var f=this;this.value=void 0,this.__pendingValue=void 0,this.element=a,this.eventName=c,this.eventContext=e,this.__boundHandleEvent=function(g){return f.handleEvent(g)}}return b.prototype.setValue=function(a){this.__pendingValue=a},b.prototype.commit=function(){for(;s(this.__pendingValue);){var a=this.__pendingValue;this.__pendingValue=x,a(this)}if(this.__pendingValue===x)return;var c=this.__pendingValue,e=this.value,f=c==null||e!=null&&(c.capture!==e.capture||c.once!==e.once||c.passive!==e.passive),g=c!=null&&(e==null||f);f&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),g&&(this.__options=_a(c),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=c,this.__pendingValue=x},b.prototype.handleEvent=function(a){typeof this.value==="function"?this.value.call(this.eventContext||this.element,a):this.value.handleEvent(a)},b}(),_a=function(b){return b&&(Aa?{capture:b.capture,passive:b.passive,once:b.once}:b.capture)},$a=function(){function b(){}return b.prototype.handleAttributeExpressions=function(a,c,e,f){var g=c[0];if(g==="."){var h=new Xa(a,c.slice(1),e);return h.parts}if(g==="@")return[new Za(a,c.slice(1),f.eventContext)];if(g==="?")return[new Wa(a,c.slice(1),e)];var i=new xa(a,c,e);return i.parts},b.prototype.handleTextExpression=function(a){return new za(a)},b}(),ab=new $a();function bb(b){var a=Ba.get(b.type);a===void 0&&(a={stringsArray:new WeakMap(),keyString:new Map()},Ba.set(b.type,a));var c=a.stringsArray.get(b.strings);if(c!==void 0)return c;var e=b.strings.join(B);return c=a.keyString.get(e),c===void 0&&(c=new Ta(b,b.getTemplateElement()),a.keyString.set(e,c)),a.stringsArray.set(b.strings,c),c}var Ba=new Map(),Ca=new WeakMap(),Z=function(b,a,c){var e=Ca.get(a);e===void 0&&(m(a,a.firstChild),Ca.set(a,e=new za(Object.assign({templateFactory:bb},c))),e.appendInto(a)),e.setValue(b),e.commit()};typeof window!=="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");var y=function(b){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];return new va(b,a,"html",ab)},I=function(b){return document.getElementById(b)},Q=function(b){return parseInt(b.closest("section").id)},pa=function(b){return parseInt(b.closest(".field").id)},ga=function(){return Math.round(new Date().getTime()*Math.random())},qa=function(b){return b.replace(/\W+|[-_]/g,"-")};function V(b,a){var c,e,f,g,h,i,j;return __generator(this,function(k){switch(k.label){case 0:k.trys.push([0,7,8,9]),c=__values(b),e=c.next(),k.label=1;case 1:return e.done?[3,6]:(f=e.value,[4,{section:f,parent:a}]);case 2:return k.sent(),g=f.children,g?[5,__values(V(f.children,f))]:[3,4];case 3:g=k.sent(),k.label=4;case 4:g,k.label=5;case 5:return e=c.next(),[3,1];case 6:return[3,9];case 7:return h=k.sent(),i={error:h},[3,9];case 8:try{e&&!e.done&&(j=c.return)&&j.call(c)}finally{if(i)throw i.error}return[7];case 9:return[2]}})}function ca(b){var a,c,e;try{for(var f=__values(V(d.now.children)),g=f.next();!g.done;g=f.next()){var h=g.value,i=h.section,j=h.parent;if(i.id==b){e=i;break}}}catch(k){a={error:k}}finally{try{g&&!g.done&&(c=f.return)&&c.call(f)}finally{if(a)throw a.error}}return e}function Da(b){var a=b.closest("section"),c=a.getAttribute("data-section-depth");return parseInt(c)}function Ea(b,a,c){var e,f=b[a]||[],g=f[c];f.splice(c,1),f.splice(c-1,0,g),S(),G(),d.hasChanged=!0,document.activeElement.blur(),(e=document.querySelector('[id="'+g.id+'"] .moveUp'))===null||e===void 0?void 0:e.focus()}function Fa(b,a,c){var e,f=b[a]||[],g=f[c];f.splice(c,1),f.splice(c+1,0,g),S(),G(),d.hasChanged=!0,document.activeElement.blur(),(e=document.querySelector('[id="'+g.id+'"] .moveDown'))===null||e===void 0?void 0:e.focus()}function ha(){var b,a,c,e;d.now.fieldTypes=d.now.selected.template.fieldTypes||[],d.now.globalTypes=d.now.selected.template.globalTypes||d.now.globalTypes,d.now.selected.fieldType=((c=d.now.fieldTypes)===null||c===void 0?void 0:c[0])||{},d.now.selected.globalType=((e=d.now.globalTypes)===null||e===void 0?void 0:e[0])||{};try{for(var f=__values(V(d.now.children)),g=f.next();!g.done;g=f.next()){var h=g.value,i=h.section,j=h.parent;if(!i.fields.length)continue;i.fields.map(function(k){var n;k.type=d.now.fieldTypes.find(function(w){var z;return w.id==((z=k.type)===null||z===void 0?void 0:z.id)})||((n=d.now.fieldTypes)===null||n===void 0?void 0:n[0])})}}catch(k){b={error:k}}finally{try{g&&!g.done&&(a=f.return)&&a.call(f)}finally{if(b)throw b.error}}}var ia=function(){function b(a){a===void 0&&(a=0),this.id=ga(),this.depth=a,this.text="",this.html="",this.children=[],this.fields=[]}return b}(),cb=function(){function b(){this.id=ga(),this.value="",this.type=0}return b}(),ja=function(){function b(a){this.id=ga(),this.name=a,this.css=""}return b}(),Ga=function(){function b(a){this.id=ga(),this.name=a}return b}(),Ha=function(b){__extends(a,b);function a(c){var e=b.call(this,c)||this;return e.type="field type",e.css="",e}return a}(Ga),Ia=function(b){__extends(a,b);function a(c){var e=b.call(this,c)||this;return e.type="template",e.fieldTypes=[],e.globalTypes=[],e}return a}(Ga),M=["Chapter","Section","Block"],da={h1:"Lvl 1 Heading",h2:"Lvl 2 Heading",h3:"Lvl 3 Heading",h4:"Lvl 4 Heading",h5:"Lvl 5 Heading",h6:"Lvl 6 Heading",hr:"Horizontal Rules",p:"Paragraph",blockquote:"Block Quote",ul:"Unordered List",ol:"Ordered List",li:"List Item",a:"Link",strong:"Bolded Text",em:"Italic Text",code:"Code",img:"Image"},J={previewPane:I("preview"),toolbar:I("toolbar"),contentEditorPane:I("content_editor"),styleEditorPane:I("style_editor"),modal:I("modal"),customStyles:I("custom_styles"),walkThroughDialogue:I("walkthrough_dialogue"),mobileNav:I("mobile_nav")},W={throttle:60,mobileBreakpoint:960,saveInterval:2000,zoom:{min:.5,max:2,interval:.1}},Ja;try{Ja=JSON.parse(localStorage.getItem("State"))}catch(b){console.log("No previous data found.")}var d=Ja||{now:{children:[],fieldTypes:[],globalTypes:M.map(function(b){return new ja(b)}).concat(Object.values(da).map(function(b){return new ja(b)})),selected:{fieldType:{},globalType:{},template:{}},editing:{}},nowIndex:0,settings:{zoom:1,darkMode:!1,advancedUI:!1,messagesShown:!1},walkthroughIndex:0,history:[],templates:[],hasChanged:!1,isNewUser:!0,isMobile:innerWidth<=W.mobileBreakpoint,lastSaved:new Date(),forExport:""},db=function(b){var a,c,e,f=Q(b.target),g=Da(b.target),h;try{for(var i=__values(V(d.now.children,d.now)),j=i.next();!j.done;j=i.next()){var k=j.value,n=k.section,w=k.parent;if(n.id==f){var z=new ia(g);w.children.push(z),h=z.id;break}}}catch(r){a={error:r}}finally{try{j&&!j.done&&(c=i.return)&&c.call(i)}finally{if(a)throw a.error}}d.hasChanged=!0,S(),d.isMobile||((e=document.querySelector('[id="'+h+'"] textarea'))===null||e===void 0?void 0:e.focus())},eb=function(b){var a,c,e,f=Q(b.target),g=Da(b.target),h;try{for(var i=__values(V(d.now.children,d.now)),j=i.next();!j.done;j=i.next()){var k=j.value,n=k.section,w=k.parent;if(n.id==f){var z=new ia(g+1);n.children.unshift(z),h=z.id;break}}}catch(r){a={error:r}}finally{try{j&&!j.done&&(c=i.return)&&c.call(i)}finally{if(a)throw a.error}}d.hasChanged=!0,S(),d.isMobile||((e=document.querySelector('[id="'+h+'"] textarea'))===null||e===void 0?void 0:e.focus())},fb=function(b){var a,c,e=Q(b.target),f=function(n,w){if(n.id!=e)return"continue";w.children=w.children.filter(function(z){return z!=n})};try{for(var g=__values(V(d.now.children,d.now)),h=g.next();!h.done;h=g.next()){var i=h.value,j=i.section,k=i.parent;f(j,k)}}catch(n){a={error:n}}finally{try{h&&!h.done&&(c=g.return)&&c.call(g)}finally{if(a)throw a.error}}d.hasChanged=!0,G(),S()},gb=function(b){var a=Q(b.target),c=ca(a);c.text=b.target.value,d.hasChanged=!0,G()},ka={addSiblingSection:db,addChildSection:eb,removeSection:fb,updateSection:gb},hb=function(b){var a,c=Q(b.target),e=ca(c),f=new cb();f.type=d.now.fieldTypes[0],e.fields.push(f),d.hasChanged=!0,S(),d.isMobile||((a=document.querySelector('[id="'+f.id+'"] input'))===null||a===void 0?void 0:a.focus())},ib=function(b){var a=Q(b.target),c=ca(a),e=pa(b.target);c.fields=c.fields.filter(function(f){return f.id!=e}),d.hasChanged=!0,S(),G()},jb=function(b){var a=Q(b.target),c=ca(a),e=pa(b.target),f=c.fields.find(function(g){return g.id==e});f.value=b.target.value,d.hasChanged=!0,G()},kb=function(b){var a=b.target.value,c=pa(b.target),e=Q(b.target),f=ca(e),g=f.fields.find(function(h){return h.id==c});g.type=d.now.fieldTypes.find(function(h){return h.id==a}),d.hasChanged=!0,G()},la={addField:hb,removeField:ib,updateFieldValue:jb,updateFieldType:kb},lb=function(b){var a=b.target.textContent||"";b.target.id.includes("global")&&(d.now.selected.globalType.css=a,d.hasChanged=!0),b.target.id.includes("field")&&(d.now.selected.fieldType.css=a,d.hasChanged=!0),Qa()},ra=function(b){var a=b.target||b,c=function(e,f){return'<span class="token '+f+'">'+e+"</span>"};a.innerHTML=a.innerText.replace(/\n/g,"").replace(/;/g,c(";","newline")).replace(/[,:](?!\s)/g,function(e){return e+" "})},mb=function(b){var a=b.target.value,c=I("field_type_styles"),e=d.now.fieldTypes.find(function(g){return g.id==a});if(e)e.css||(e.css=""),d.now.selected.fieldType=e;else{var f={id:a,css:""};d.now.fieldTypes.push(f),d.now.selected.fieldType=f}c.innerHTML=d.now.selected.fieldType.css,ra(c),d.hasChanged=!0,G()},nb=function(b){var a=I("global_type_styles"),c=b.target.value,e=d.now.globalTypes.find(function(g){return g.name==c});if(e)e.css||(e.css=""),d.now.selected.globalType=e;else{var f={id:c,css:""};d.now.globalTypes.push(f),d.now.selected.globalType=f}a.innerHTML=d.now.selected.globalType.css,ra(a),d.hasChanged=!0,G()},X={updateStyles:lb,updateCurrentFieldType:mb,updateCurrentGlobalType:nb,formatCSS:ra},ob=function(b){var a,c;if(b=="template"){d.templates=d.templates.filter(function(e){return JSON.parse(e).id!=d.now.selected.template.id});try{d.now.selected.template=JSON.parse((a=d.templates)===null||a===void 0?void 0:a[0])||{}}catch(e){}}b=="field type"&&(d.now.fieldTypes=d.now.fieldTypes.filter(function(e){return e.id!=d.now.selected.fieldType.id}),d.now.selected.template.fieldTypes=d.now.fieldTypes,d.now.selected.fieldType=((c=d.now.fieldTypes)===null||c===void 0?void 0:c[0])||{}),d.now.editing={},d.hasChanged=!0,R(),N(null)},pb=function(b){var a;d.now.editing[b.target.name]=b.target.value,((a=d.now.editing)===null||a===void 0?void 0:a.type)=="template"&&d.templates.map(function(c,e){var f=JSON.parse(c),g=f.id==d.now.editing.id;g&&d.templates.splice(e,1,JSON.stringify(d.now.editing))}),d.hasChanged=!0,R()},qb=function(){var b,a;d.now.selected.fieldType=d.now.fieldTypes[d.now.fieldTypes.length-1],d.now.selected.template.fieldTypes=d.now.fieldTypes;if(d.now.fieldTypes.length==1)try{for(var c=__values(V(d.now.children)),e=c.next();!e.done;e=c.next()){var f=e.value,g=f.section,h=f.parent;g.fields.map(function(i){return i.type=d.now.fieldTypes[0]})}}catch(i){b={error:i}}finally{try{e&&!e.done&&(a=c.return)&&a.call(c)}finally{if(b)throw b.error}}},rb=function(b){var a;d.now.editing.name=d.now.editing.name.trim();if(!d.now.editing.name.length){N(null);return}b=="field type"&&(d.now.fieldTypes.push(new Ha(d.now.editing.name)),qb(),(a=J.styleEditorPane.querySelector("code"))===null||a===void 0?void 0:a.focus());if(b=="template"){var c=new Ia(d.now.editing.name);c.fieldTypes=d.now.fieldTypes,c.globalTypes=d.now.globalTypes,d.templates.push(JSON.stringify(c)),d.now.selected.template=c}d.now.editing={},d.hasChanged=!0,R(),N(null)},sa={removeType:ob,updateType:pb,saveNewType:rb},sb=function(b){var a=d.settings.darkMode;document.documentElement.classList.toggle("dark_mode",!a),d.settings.darkMode=!a,d.hasChanged=!0,_()},tb=function(b){var a=d.settings.advancedUI;document.documentElement.classList.toggle("advanced",!a),d.settings.advancedUI=!a,d.hasChanged=!0,_()},Ka=function(b){var a,c;if(!confirm("Are you sure you want to load this template?"))return;try{for(var e=__values(d.templates),f=e.next();!f.done;f=e.next()){var g=f.value,h=JSON.parse(g);if(h.id==b.target.value){d.now.selected.template=h,ha(),R(),d.hasChanged=!0;break}}}catch(i){a={error:i}}finally{try{f&&!f.done&&(c=e.return)&&c.call(e)}finally{if(a)throw a.error}}},ub=function(b){return window.print()},vb=function(b){var a=b.target.files[0],c=new FileReader();c.onerror=function(){console.error(this.error)},c.onload=function(){var e=JSON.parse(this.result);Object.keys(d).map(function(f){return d[f]=e[f]}),ha(),R()},document.body.classList.add("importing"),c.readAsText(a)},wb=function(b){d.now.children=[new ia()],d.now.fieldTypes=[],d.now.globalTypes=M.map(function(a){return new ja(a)}).concat(Object.values(da).map(function(a){return new ja(a)})),d.now.editing={},d.now.selected={fieldType:{},globalType:{},template:{}},d.templates=[],R(),d.hasChanged=!0},xb=function(b){document.body.setAttribute("data-selected-pane",b)},yb=function(b){b===void 0&&(b="");var a=b.toLowerCase(),c=d.settings.zoom;a=="out"&&c>W.zoom.min&&(c=c-W.zoom.interval),a=="in"&&c<W.zoom.max&&(c=c+W.zoom.interval),c!=d.settings.zoom&&(d.settings.zoom=c,d.hasChanged=!0,_())},Y={toggleDarkMode:sb,toggleAdvancedUI:tb,loadTemplate:Ka,printDocument:ub,importData:vb,clearData:wb,switchPane:xb,zoom:yb},La=function(b){var a=b===void 0?{}:b,c=a.global,e=c===void 0?!1:c,f=a.field,g=f===void 0?{}:f,h,i,j,k;if(!((h=d.now.fieldTypes)===null||h===void 0?void 0:h.length))return;var n=e?(i=d.now.selected.fieldType)===null||i===void 0?void 0:i.id:(k=(j=g)===null||j===void 0?void 0:j.type)===null||k===void 0?void 0:k.id;return y(__makeTemplateObject([`
    <select name=type @input=`,`>

        `,`

    </select>`],[`
    <select name=type @input=`,`>

        `,`

    </select>`]),e?X.updateCurrentFieldType:la.updateFieldType,d.now.fieldTypes.map(function(w){return y(__makeTemplateObject([`
            <option value=`," ?selected=",`>
                `,`
            </option>
        `],[`
            <option value=`," ?selected=",`>
                `,`
            </option>
        `]),w.id,w.id==n,w.name)}))},zb=function(b,a,c){return y(__makeTemplateObject([`
<div 
class=field 
id=`,`>

    <input 
    placeholder="Field value..."
    type=text 
    .value=`,` 
    @input=`,` />

    `,`

    <button 
    @click=`,` 
    class=remove>
        Remove
    </button>

    <button
    data-icon
    @click=`,`
    ?disabled=`,`
    class="move moveDown">
    </button>

    <button
    data-icon
    @click=`,`
    ?disabled=`,` 
    class="move moveUp">
    </button>

</div>`],[`
<div 
class=field 
id=`,`>

    <input 
    placeholder="Field value..."
    type=text 
    .value=`,` 
    @input=`,` />

    `,`

    <button 
    @click=`,` 
    class=remove>
        Remove
    </button>

    <button
    data-icon
    @click=`,`
    ?disabled=`,`
    class="move moveDown">
    </button>

    <button
    data-icon
    @click=`,`
    ?disabled=`,` 
    class="move moveUp">
    </button>

</div>`]),b.id,b.value,la.updateFieldValue,La({field:b}),la.removeField,Fa.bind(void 0,a,"fields",c),c>=a.fields.length-1,Ea.bind(void 0,a,"fields",c),!c)};function Ma(b,a,c){var e=d.now.children.length,f=b.depth,g=f==M.length-1;return y(__makeTemplateObject([`
    <section 
    id=`,` 
    data-section-depth=`,`>

        <div class=fields>
            `,`
        </div>

        <textarea 
        id="`,`-text"
        placeholder=`,` 
        @input=`,` 
        .value=`,`>
        </textarea>

        <div class=actions>

            <button 
            data-icon=add_another
            title=`,`
            @click=`,`>
            </button>

            `,`

            <button 
            class=add
            data-icon
            title="Add Field"
            @click=`,`>
            </button>

            `,`

            `,`

        </div>

        `,`

    </section>`],[`
    <section 
    id=`,` 
    data-section-depth=`,`>

        <div class=fields>
            `,`
        </div>

        <textarea 
        id="`,`-text"
        placeholder=`,` 
        @input=`,` 
        .value=`,`>
        </textarea>

        <div class=actions>

            <button 
            data-icon=add_another
            title=`,`
            @click=`,`>
            </button>

            `,`

            <button 
            class=add
            data-icon
            title="Add Field"
            @click=`,`>
            </button>

            `,`

            `,`

        </div>

        `,`

    </section>`]),b.id,b.depth,b.fields.map(function(h,i){return zb(h,b,i)}),b.id,"Write something for this "+M[f].toLowerCase()+"...",ka.updateSection,b.text,"Add "+M[f],ka.addSiblingSection,g?"":y(__makeTemplateObject([`
            <button 
            data-icon=add_sub
            title=`,`
            @click=`,`>
            </button>`],[`
            <button 
            data-icon=add_sub
            title=`,`
            @click=`,`>
            </button>`]),"Add "+M[f+1],ka.addChildSection),la.addField,e>1||f?y(__makeTemplateObject([`
            <button 
            class=remove
            @click=`,`>
            Remove
            </button>`],[`
            <button 
            class=remove
            @click=`,`>
            Remove
            </button>`]),ka.removeSection):"",a.children.length>1?y(__makeTemplateObject([`

            <button 
            class="move moveDown" 
            data-icon
            title="Move Down"
            ?disabled=`,` 
            @click=`,`>
            </button>

            <button 
            class="move moveUp"
            data-icon
            title="Move Up"
            ?disabled=`,` 
            @click=`,`>
            </button>
            
            `],[`

            <button 
            class="move moveDown" 
            data-icon
            title="Move Down"
            ?disabled=`,` 
            @click=`,`>
            </button>

            <button 
            class="move moveUp"
            data-icon
            title="Move Up"
            ?disabled=`,` 
            @click=`,`>
            </button>
            
            `]),c>=a.children.length-1,Fa.bind(this,a,"children",c),!c,Ea.bind(this,a,"children",c)):"",b.children.length?b.children.map(function(h,i){return Ma(h,b,i)}):"")}var Na=function(b){var a={"!":"33","#":"35","&":"38;","(":"40",")":"41","*":"42","+":"43","-":"45",".":"46","<":"60;",">":"62;","[":"91","\\":"92","]":"93",_:"95","`":"96","{":"123","}":"125","~":"126"},c=/(^|\s)(> )+(.|\n)+?(?=$|\n(?!>))/g,e="[0-9]+\\. ",f="[-+*] ",g=function(l){return"&#"+(a[l]||l)},h=function(l){return l.replace(/[&<>]/g,g)},i=function(l){return l.trim().slice(1,-1)},j=function(l,v){return"<"+l+">"+v+"</"+l+">"},k=function(l){var v=new RegExp("[^|\\n]"+e).test(l),E=new RegExp("(^|\\n)"+(v?e:f)),ba=l.split(E).filter(function(fa){return fa.trim().length});return j(v?"ol":"ul",ba.map(function(fa){return j("li",fa)}).join(""))},n=function(l){l=l.trim();var v=l.indexOf(" ");return j("h"+v,l.slice(v).replace(/#+$/,"").trim())},w=function(l){var v=l.trim().split(/\n/);return j("h"+(v[1].indexOf("-")>-1?2:1),v[0])},z=function(l){var v=l.slice(1,-1).split("]("),E=v[1].split(/ ["`']/)[1];return'<a href="'+v[1]+'" '+(E?'title="'+E+'"':"")+">"+v[0]+"</a>"},r=function(l){var v=l.split(/["`']/),E=v[0].trim().replace(/^<|>$/g,""),ba=v[1];return' <a href="'+E+'" '+(ba?'title="'+ba+'"':"")+">"+E+"</a>"},C=function(l){var v=l.slice(2,-1).split("]("),E=v[1].split(/ ["`']/)[1];return'<img src="'+v[1]+'" '+(E?'title="'+E+'"':"")+' alt="'+v[0]+'">'},$=function(l){var v=__read(l.trim().split(/\n+/)),E=v[0],ba=v.slice(1),fa=h(ba.slice(0,-1).join("\r")).trim();return j("pre",'<code class="language-'+E.slice(3)+'">'+fa+"</code>")},K=function(l){return l=j("blockquote",l.replace(/^ *?> /gm,"")),l.replace(c,K)},D=function(l){return' <a href="'+l+'">'+l.trim()+"</a>"},T=function(l){return j("p",l.trim())},U=function(l){return j("strong",l.slice(2,-2))},O=function(l){return j("em",i(l))},H=function(l){return j("del",i(l))},aa=function(l){return j("code",h(i(l)))};return b.replace(/\r+/g,`
`).replace(/\\[-*_\\`#~+.!(){}[\]]/g,function(l){return g(l.slice(1))}).replace(/(^|\n).+?\n[-=]+(?=$|\n)/g,w).replace(/(^|\n)#+? (.|\n)+?(?=$|\n)/g,n).replace(/(^|\n)([-*_] ?){3,}(?=$|\n)/g,"<hr>").replace(/(^|\n)([0-9]+\.|[-+*]) (.|\n)+?(?=$|[\s\n]{3,})/g,k).replace(c,K).replace(/(^|\n)```(.|\n)+?```(?=$|\n)/g,$).replace(/  (\n|$)/g,"<br>").replace(/!\[.+?\]\(.+?\)/g,C).replace(/\[.+?\]\(.+?\)/g,z).replace(/<(https?:\/\/|www).+?>( (".+?")|('.+?'))?(?=$|\n| )/g,r).replace(/(^|\n| )(https?:\/\/|www)(.+?)+?(?=$|\n| )/g,D).replace(/\s[*_](?=\s)/g,function(l){return l.slice(0,1)+g(l.slice(1))}).replace(/[*_]{2}.+?[*_]{2}/gm,U).replace(/[*_].+?[*_]/gm,O).replace(/~.+?~/gm,H).replace(/`.+?`/gm,aa).replace(/(^|\n\n+)(?!<[huol]).+?(?=$|\n\n+)/gi,T)},Ab=function(b){var a,c=d.now.fieldTypes.find(function(f){var g,h;return f.id==((h=(g=b)===null||g===void 0?void 0:g.type)===null||h===void 0?void 0:h.id)}),e=document.createElement("div");return e.innerHTML=Na(b.value),/<p>/.test(e.innerHTML)&&(e.innerHTML=e.firstElementChild.innerHTML),y(__makeTemplateObject([`
    <div class=`,`>
        `,`
    </div>`],[`
    <div class=`,`>
        `,`
    </div>`]),qa(((a=c)===null||a===void 0?void 0:a.name)||""),e)};function Oa(b){var a=document.createElement("div");return a.classList.add("content"),a.innerHTML=Na(b.text),y(__makeTemplateObject([`
    <section class=`,`>
    
        `,`
    
        `,`
    
        `,`
    
    </section>`],[`
    <section class=`,`>
    
        `,`
    
        `,`
    
        `,`
    
    </section>`]),M[b.depth],b.fields.map(function(c){return Ab(c)}),b.text.length?a:"",b.children.map(function(c){return Oa(c)}))}var Bb=function(){var b;return y(__makeTemplateObject([`

<div class="heading">
    Style Editor
    <span tabindex="0" data-tooltip="This pane is for editing your document's styles. Apply valid CSS rules to any custom field type or global element."></span>
</div>

<section id=manageFieldTypes>

    <div class=actions>

        <label>Field Styles</label>

        `,`

        `,`

        <button 
        class=add 
        data-icon
        title="New Field Type"
        @click=`,`>
        </button>
        
    </div>

    <code 
    spellcheck=false
    id=field_type_styles
    class=language-css 
    contenteditable=true 
    @focusout=`,`
    @keyup=`,`></code>
    
</section>


<section id=manageGlobalTypes>

    <div class=actions>

        <label>Global Styles</label>

        <select id=global-style-select @input=`,`>

            <optgroup label=Layout>
            `,`
            </optgroup>

            <optgroup label=Elements>
                `,`
            </optgroup>
        </select>

    </div>

    <code
    spellcheck=false
    id=global_type_styles
    class=language-css
    contenteditable=true
    @focusout=`,`
    @keyup=`,`></code>

</section>
`],[`

<div class="heading">
    Style Editor
    <span tabindex="0" data-tooltip="This pane is for editing your document's styles. Apply valid CSS rules to any custom field type or global element."></span>
</div>

<section id=manageFieldTypes>

    <div class=actions>

        <label>Field Styles</label>

        `,`

        `,`

        <button 
        class=add 
        data-icon
        title="New Field Type"
        @click=`,`>
        </button>
        
    </div>

    <code 
    spellcheck=false
    id=field_type_styles
    class=language-css 
    contenteditable=true 
    @focusout=`,`
    @keyup=`,`></code>
    
</section>


<section id=manageGlobalTypes>

    <div class=actions>

        <label>Global Styles</label>

        <select id=global-style-select @input=`,`>

            <optgroup label=Layout>
            `,`
            </optgroup>

            <optgroup label=Elements>
                `,`
            </optgroup>
        </select>

    </div>

    <code
    spellcheck=false
    id=global_type_styles
    class=language-css
    contenteditable=true
    @focusout=`,`
    @keyup=`,`></code>

</section>
`]),La({global:!0}),((b=d.now.fieldTypes)===null||b===void 0?void 0:b.length)?y(__makeTemplateObject([`
        <button 
        data-icon
        title="Edit Field Type"
        @click=`,`>
        </button>`],[`
        <button 
        data-icon
        title="Edit Field Type"
        @click=`,`>
        </button>`]),N.bind(void 0,"field type",!0)):"",N.bind(void 0,"field type",!1),X.formatCSS,X.updateStyles,X.updateCurrentGlobalType,M.map(function(a){var c;return y(__makeTemplateObject([`
                <option
                value=`,`
                ?selected=`,`>
                    `,`s
                </option>
            `],[`
                <option
                value=`,`
                ?selected=`,`>
                    `,`s
                </option>
            `]),a,a==((c=d.now.selected.globalType)===null||c===void 0?void 0:c.name),a)}),Object.values(da).map(function(a){var c;return y(__makeTemplateObject([`
                    <option 
                    label=`,`
                    value=`,`
                    ?selected=`,`>
                        `,`s
                    </option>
                `],[`
                    <option 
                    label=`,`
                    value=`,`
                    ?selected=`,`>
                        `,`s
                    </option>
                `]),a,a,a==((c=d.now.selected.globalType)===null||c===void 0?void 0:c.name),a)}),X.formatCSS,X.updateStyles)},Cb=function(){return y(__makeTemplateObject([`

`,`

`,`

`,`
`],[`

`,`

`,`

`,`
`]),d.now.fieldTypes.map(function(b){return"#preview ."+qa(b.name).trim()+"{"+b.css+"}"}),M.map(function(b){var a,c=d.now.globalTypes.find(function(e){return e.name==b});return"#preview ."+qa(b).trim()+"{"+((a=c)===null||a===void 0?void 0:a.css)+"}"}),Object.keys(da).map(function(b){var a,c=da[b],e=d.now.globalTypes.find(function(f){return f.name==c});return"#preview "+b+" {"+((a=e)===null||a===void 0?void 0:a.css)+"}"}))},Pa=function(b){b===void 0&&(b=0);var a=d.nowIndex+b;d.now=JSON.parse(d.history[a]),d.nowIndex=a,ha(),R()},Db=function(){var b,a,c=d.settings;return y(__makeTemplateObject([`
    <!-- Undo/Redo -->
    <div class=configuration id=undo_redo>
        <button data-icon title=Undo ?disabled=`," @click=",`>
        </button>
        <button data-icon title=Redo ?disabled=`,`
            @click=`,`>
        </button>
    </div>
    
    <!-- Zoom -->
    <div class=configuration id=zoom>
        <button data-icon title="Zoom Out" @click=`,`>
        </button>
        <button data-icon title="Zoom In" @click=`,`>
        </button>
        <label>`,`</label>
    </div>
    
    <!-- Toggle Dark Mode -->
    <div class=configuration>
        <button data-icon title=`,`
            ?aria-pressed=`," @click=",` id=dark_mode_toggle>
        </button>
    </div>
    
    <!-- Toggle Advanced UI -->
    <div class=configuration id=advancedUI_toggle>
        <button data-icon id="advanced_toggle" ?aria-pressed=`," title="," @click=",`>
        </button>
    </div>
    
    <!-- Template Management -->
    <div class=configuration id=manageTemplates>
        <!-- Select Template -->
        `,`
    
        <!-- Save New Template -->
        <button data-icon title="New Template" @click=`,`></button>
    </div>
    
    <!-- Print Document -->
    <div class=configuration id=printDocument>
        <button data-icon title=Print @click=`,`>
        </button>
    </div>
    
    <!-- Import and Export Data -->
    <div class=configuration id=import_export>
        <input aria-hidden="true" id=importData type=file accept=.json @input=`,`>
        <label data-icon title="Import Data" class="fileInput secondary" for=importData>
        </label>
        <a class="button primary" data-icon title="Export Data" id=exportData .href=`," download=",`>
        </a>
        <!-- Clear Data -->
        <button data-icon title="Clear Data" class=destructive @click=`,`>
        </button>
    </div>
    
    <!-- Last Saved -->
    <div class=configuration id=savedIndicator>
        Saved: `,`
    </div>`],[`
    <!-- Undo/Redo -->
    <div class=configuration id=undo_redo>
        <button data-icon title=Undo ?disabled=`," @click=",`>
        </button>
        <button data-icon title=Redo ?disabled=`,`
            @click=`,`>
        </button>
    </div>
    
    <!-- Zoom -->
    <div class=configuration id=zoom>
        <button data-icon title="Zoom Out" @click=`,`>
        </button>
        <button data-icon title="Zoom In" @click=`,`>
        </button>
        <label>`,`</label>
    </div>
    
    <!-- Toggle Dark Mode -->
    <div class=configuration>
        <button data-icon title=`,`
            ?aria-pressed=`," @click=",` id=dark_mode_toggle>
        </button>
    </div>
    
    <!-- Toggle Advanced UI -->
    <div class=configuration id=advancedUI_toggle>
        <button data-icon id="advanced_toggle" ?aria-pressed=`," title="," @click=",`>
        </button>
    </div>
    
    <!-- Template Management -->
    <div class=configuration id=manageTemplates>
        <!-- Select Template -->
        `,`
    
        <!-- Save New Template -->
        <button data-icon title="New Template" @click=`,`></button>
    </div>
    
    <!-- Print Document -->
    <div class=configuration id=printDocument>
        <button data-icon title=Print @click=`,`>
        </button>
    </div>
    
    <!-- Import and Export Data -->
    <div class=configuration id=import_export>
        <input aria-hidden="true" id=importData type=file accept=.json @input=`,`>
        <label data-icon title="Import Data" class="fileInput secondary" for=importData>
        </label>
        <a class="button primary" data-icon title="Export Data" id=exportData .href=`," download=",`>
        </a>
        <!-- Clear Data -->
        <button data-icon title="Clear Data" class=destructive @click=`,`>
        </button>
    </div>
    
    <!-- Last Saved -->
    <div class=configuration id=savedIndicator>
        Saved: `,`
    </div>`]),d.nowIndex==0,Pa.bind(void 0,-1),d.nowIndex>=d.history.length-1,Pa.bind(void 0,1),Y.zoom.bind(void 0,"out"),Y.zoom.bind(void 0,"in"),"("+Math.round(c.zoom*100)+"%)","You're in "+(c.darkMode?"Dark":"Light")+" Mode",c.darkMode,Y.toggleDarkMode,c.advancedUI,(c.advancedUI?"Disable":"Enable")+" Advanced UI",Y.toggleAdvancedUI,d.templates.length?y(__makeTemplateObject(["<select title="," @input=",`>
                `,`
            </select>
            <button data-icon title=" Edit Template" @click=`,"></button>"],["<select title="," @input=",`>
                `,`
            </select>
            <button data-icon title=" Edit Template" @click=`,"></button>"]),"Current Template: "+d.now.selected.template.name,Ka,d.templates.map(function(e){var f=JSON.parse(e),g=d.now.selected.template.id==f.id;return y(__makeTemplateObject(["<option ?selected="," value=",">","</option>"],["<option ?selected="," value=",">","</option>"]),g,f.id,f.name)}),N.bind(void 0,"template",!0)):F,N.bind(void 0,"template",!1),Y.printDocument,Y.importData,(b=d)===null||b===void 0?void 0:b.forExport,`My Data\r
            (`+new Date(d.lastSaved).toLocaleDateString()+").json",Y.clearData,new Date(((a=d)===null||a===void 0?void 0:a.lastSaved)||"").toLocaleTimeString("en-us",{timeStyle:"short"}))},Eb=function(b,a){return b?(b=="field type"&&(d.now.editing=a?d.now.selected.fieldType:new Ha()),b=="template"&&(d.now.editing=a?d.now.selected.template:new Ia()),y(__makeTemplateObject([`
    <div class=content>
        
        <div class=heading>
            `,` Editor
            <span
            tabindex=0 
            data-tooltip=`,`>
            </span>
        </div>

        <input 
        name=name 
        @input=`,` 
        type=text 
        placeholder=`,`
        value=`,` />
        
        <div class=actions>

            <button 
            @click=`,`>
                Done
            </button>

            `,`

            <button 
            class=cancel 
            @click=`,`>
                Cancel
            </button>
            
        </div>

    </div>`],[`
    <div class=content>
        
        <div class=heading>
            `,` Editor
            <span
            tabindex=0 
            data-tooltip=`,`>
            </span>
        </div>

        <input 
        name=name 
        @input=`,` 
        type=text 
        placeholder=`,`
        value=`,` />
        
        <div class=actions>

            <button 
            @click=`,`>
                Done
            </button>

            `,`

            <button 
            class=cancel 
            @click=`,`>
                Cancel
            </button>
            
        </div>

    </div>`]),d.now.editing.type,"This pane is for renaming or editing your "+d.now.editing.type+".",sa.updateType,"Name your "+d.now.editing.type+"...",a?d.now.editing.name:"",a?N.bind(void 0,null):sa.saveNewType.bind(void 0,d.now.editing.type),a?y(__makeTemplateObject([`
            <button 
            class=remove 
            @click=`,`>
                Delete `,`
            </button>`],[`
            <button 
            class=remove 
            @click=`,`>
                Delete `,`
            </button>`]),sa.removeType.bind(void 0,d.now.editing.type),d.now.editing.type):"",N.bind(void 0,null))):""};function R(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(b){return S(),_(),G(),Ra(),Qa(),[2]})})}function G(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(b){return Z(y(__makeTemplateObject([`
        <div class=content>
            `,`
        </div>`],[`
        <div class=content>
            `,`
        </div>`]),d.now.children.map(function(a){return Oa(a)})),J.previewPane),[2]})})}function _(){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(a){return b=document.documentElement,b.style.setProperty("--preview_zoom",d.settings.zoom),b.classList.toggle("dark_mode",d.settings.darkMode),b.classList.toggle("advanced",d.settings.advancedUI),Z(Db(),J.toolbar),[2]})})}function Qa(){Z(Cb(),J.customStyles)}function N(b,a){a===void 0&&(a=!1),J.modal.classList.toggle("open",b),Z(Eb(b,a),J.modal);if(b)try{J.modal.querySelector("input").focus()}catch(c){}b||(d.now.editing={},_(),Ra(),G())}function Ra(){var b,a,c,e,f;Z(Bb(),J.styleEditorPane);try{for(var g=__values(J.styleEditorPane.querySelectorAll("code")),h=g.next();!h.done;h=g.next()){var i=h.value;i.innerHTML="",i.id.includes("field")&&(i.innerText=((c=d.now.selected.fieldType)===null||c===void 0?void 0:c.css)||""),i.id.includes("global")&&(i.innerText=((e=d.now.selected.globalType)===null||e===void 0?void 0:e.css)||""),(f=X)===null||f===void 0?void 0:f.formatCSS({target:i})}}catch(j){b={error:j}}finally{try{h&&!h.done&&(a=g.return)&&a.call(g)}finally{if(b)throw b.error}}}function S(){Z(y(__makeTemplateObject([`
        <div class=heading>
            Content Editor
            <span tabindex=0
                data-tooltip="This pane is for editing the content of your document. Try nesting content blocks or adding custom fields to a section."></span>
        </div>
        
        `,`
        `],[`
        <div class=heading>
            Content Editor
            <span tabindex=0
                data-tooltip="This pane is for editing the content of your document. Try nesting content blocks or adding custom fields to a section."></span>
        </div>
        
        `,`
        `]),d.now.children.map(function(b,a){return Ma(b,d.now,a)})),J.contentEditorPane)}function Sa(b){return b===void 0&&(b=!1),__awaiter(this,void 0,void 0,function(){var a,c,e;return __generator(this,function(f){return!d.hasChanged&&!b?[2]:(d.templates.map(function(g,h){var i=JSON.parse(g),j=i.id==d.now.selected.template.id;j&&d.templates.splice(h,1,JSON.stringify(d.now.selected.template))}),localStorage.setItem("State",JSON.stringify(d)),d.history.push(JSON.stringify(d.now)),d.nowIndex=d.history.length-1,d.history.length>250&&d.history.splice(0,1),d.hasChanged=!1,d.lastSaved=new Date().getTime(),a=JSON.stringify(d,function(g,h){switch(g){case"history":return[];case"settings":return{}}}),c=new Blob([a],{type:"application/json"}),e=URL.createObjectURL(c),d.forExport=e,_(),[2])})})}d.isNewUser&&!d.now.children.length&&(d.now.children.push(new ia()),Sa(!0)),ha(),R(),setInterval(Sa,W.saveInterval),document.body.classList.remove("loading"),d.isMobile=innerWidth<W.mobileBreakpoint;try{for(var ma=__values(document.querySelectorAll("[data-icon]")),ea=ma.next();!ea.done;ea=ma.next()){var Fb=ea.value;Fb.setAttribute("aria-hidden",!0)}}catch(b){q={error:b}}finally{try{ea&&!ea.done&&(t=ma.return)&&t.call(ma)}finally{if(q)throw q.error}}})();
